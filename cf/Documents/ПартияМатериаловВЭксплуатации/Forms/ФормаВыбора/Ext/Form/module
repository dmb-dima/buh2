////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

// Обработчик события "ПриОткрытии" формы.
//
Процедура ПриОткрытии()

	// Проверка однофирменности
	РаботаСДиалогами.УстановитьОтборПоОрганизации(ЭтаФорма,, глЗначениеПеременной("ОсновнаяОрганизация"), "ДокументСписок");

	// Установка отбора по номенклатуре.
	// Реквизит формы "Номенклатура" устанавливается владельцем при вызове формы.
	Если ЗначениеЗаполнено(Номенклатура) Тогда

		ДокументСписок.Отбор.Номенклатура.ВидСравнения  = ВидСравнения.Равно;
		ДокументСписок.Отбор.Номенклатура.Использование = Истина;
		ДокументСписок.Отбор.Номенклатура.Значение      = Номенклатура;
		
	КонецЕсли;
	
КонецПроцедуры // ПриОткрытии()

Процедура ДокументСписокПередНачаломДобавления(Элемент, Отказ, Копирование)
	
	ФормаДокумента = Документы.ПартияМатериаловВЭксплуатации.ПолучитьФормуНовогоДокумента(,Элемент,);
	ФормаДокумента.ДокументОбъект.Номенклатура = ДокументСписок.Отбор.Номенклатура.Значение;
	ФормаДокумента.Открыть();
	
КонецПроцедуры
