Перем мАвтоматическийПоказ Экспорт;

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	ФлажокНеПоказывать = ЗначениеЗаполнено(ВосстановитьЗначение("роНеПоказыватьИнформациюДляПользователей"));
	
	ИДКонфигурации = РегламентированнаяОтчетность.ИДКонфигурации();
	РедакцияКонфигурации = РегламентированнаяОтчетность.РедакцияКонфигурации();
	
	// сначала ищем макет с номером редакции в имени
	МакетМетаданные = Метаданные.Обработки.ОбщиеОбъектыРегламентированнойОтчетности.Макеты.Найти("ИнформацияДляПользователей" + ИДКонфигурации + СтрЗаменить(РедакцияКонфигурации, ".", ""));
	Если МакетМетаданные = Неопределено Тогда // если макет с номером редакции в имени не найден, то ищем без номера
		МакетМетаданные = Метаданные.Обработки.ОбщиеОбъектыРегламентированнойОтчетности.Макеты.Найти("ИнформацияДляПользователей" + ИДКонфигурации);
	КонецЕсли;
	
	Если МакетМетаданные <> Неопределено Тогда
		Макет = Обработки.ОбщиеОбъектыРегламентированнойОтчетности.ПолучитьМакет(МакетМетаданные);
		Если Макет.ВысотаТаблицы > 1 Тогда
			ЭлементыФормы.ПолеТабличногоДокументаИнформация.Очистить();
			ЭлементыФормы.ПолеТабличногоДокументаИнформация.Вывести(Макет);
		Иначе
			Если НЕ мАвтоматическийПоказ Тогда
				Предупреждение("Описание особенностей для текущей версии подсистемы недоступно!");
			КонецЕсли;
			Отказ = Истина;
			Возврат;
		КонецЕсли;
	Иначе
		Если НЕ мАвтоматическийПоказ Тогда
			Предупреждение("Описание особенностей для текущей версии подсистемы недоступно!");
		КонецЕсли;
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	
	СохранитьЗначение("роНеПоказыватьИнформациюДляПользователей", ?(ФлажокНеПоказывать, Метаданные.Версия, Неопределено));
	
КонецПроцедуры

