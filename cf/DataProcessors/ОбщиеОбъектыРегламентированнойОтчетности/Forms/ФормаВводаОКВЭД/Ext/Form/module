Перем БылаНажатаКнопкаОК;

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)

	ОКВЭД = НачальноеЗначениеВыбора.ОКВЭД;
	БылаНажатаКнопкаОК = Ложь;

КонецПроцедуры

Процедура ОсновныеДействияФормыОсновныеДействияФормыОк(Кнопка)

	ОКВЭДПуст = Ложь;
	Если СтрЗаменить(ОКВЭД, " ", "") = ".." Тогда
		ОКВЭДПуст = Истина;
	КонецЕсли;

	// Проверим, чтобы первый разряд ОКВЭД был из цифр ХХ.
	Если (НЕ ОКВЭДПуст) И (Найти(Лев(ОКВЭД, 2), " ") > 0) Тогда
		Сообщить("В первом разряде кода ОКВЭД должны быть указаны два числовых символа.", СтатусСообщения.Важное);
		Возврат;
	КонецЕсли;

	БылаНажатаКнопкаОК = Истина;
	Закрыть();

КонецПроцедуры

Процедура ПриЗакрытии()

	Если НЕ БылаНажатаКнопкаОк Тогда
		Возврат;
	КонецЕсли;

	НачальноеЗначениеВыбора.Вставить("ОКВЭД", ОКВЭД);

КонецПроцедуры

Процедура ПередЗакрытием(Отказ, СтандартнаяОбработка)
	Отказ = Истина;
	Закрыть(БылаНажатаКнопкаОК);
КонецПроцедуры
