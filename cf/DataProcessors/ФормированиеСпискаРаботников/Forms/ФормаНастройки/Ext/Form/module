Перем мСтруктураНедоступныхОтборов Экспорт; 

Перем мСписокДоступныхСпособовРасчета;// Список доступных для начисления способов расчета
Перем мСписокКодовВычетов;

////////////////////////////////////////////////////////////////////////////////
// ВСПОМОГАТЕЛЬНЫЕ ПРОЦЕДУРЫ И ФУНКЦИИ

Процедура УказатьВладельцаПолюПодразделения(Элемент)

	Если ТипЗнч(Элемент.Значение) = Тип("СправочникСсылка.ПодразделенияОрганизаций") Тогда
		Попытка
			Элемент.ВыборПоВладельцу = ПостроительОтчета.Отбор.ОбособленноеПодразделение.Значение
		Исключение
		КонецПопытки;	
	КонецЕсли;

КонецПроцедуры

// Функция формирует структуру параметров для для ввода головной организации по подстроке
//  и для ввода типа отнесения расходов к ЕНВД
//
// Параметры
//  НЕТ
//
// Возвращаемое значение:
//   Структура имен и значений параметров
//
////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ДЕЙСТВИЯ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ

Процедура КнопкаВыполнитьНажатие(Кнопка)
	
	ОповеститьОВыборе(ПолучитьСписокРаботников());
	
	Закрыть();

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

Процедура ВключатьУволенныхПриИзменении(Элемент)
	ЗаполнитьНачальныеНастройки(Ложь);
КонецПроцедуры

Процедура ТабличноеПолеОтборПередУдалением(Элемент, Отказ)
	Отказ = ЗначениеЗаполнено(Элемент.ТекущиеДанные.Имя) И мСтруктураНедоступныхОтборов.Свойство(Элемент.ТекущиеДанные.Имя);
КонецПроцедуры

Процедура ТабличноеПолеОтборПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	Если ЗначениеЗаполнено(ДанныеСтроки.Имя) И мСтруктураНедоступныхОтборов.Свойство(ДанныеСтроки.Имя) Тогда
		ОформлениеСтроки.Ячейки.Использование.ТолькоПросмотр = Истина;
		ОформлениеСтроки.Ячейки.Имя.ТолькоПросмотр = Истина;
		ОформлениеСтроки.Ячейки.ВидСравнения.ТолькоПросмотр = Истина;
		ОформлениеСтроки.Ячейки.Значение.ТолькоПросмотр = Истина;
	КонецЕсли;
КонецПроцедуры

Процедура ТабличноеПолеОтборИмяОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	СтандартнаяОбработка = НЕ ЗначениеЗаполнено(ВыбранноеЗначение) Или Не мСтруктураНедоступныхОтборов.Свойство(ВыбранноеЗначение);
	Если Не СтандартнаяОбработка Тогда
		Предупреждение("Отбор по " + ?(ВыбранноеЗначение = "ОбособленноеПодразделение","организации","подразделению") + " уже установлен!");
	КонецЕсли;
КонецПроцедуры

Процедура ТабличноеПолеОтборЗначениеНачалоВыбора(Элемент, СтандартнаяОбработка)
	УказатьВладельцаПолюПодразделения(Элемент)
КонецПроцедуры

Процедура ТабличноеПолеОтборЗначениеАвтоПодборТекста(Элемент, Текст, ТекстАвтоПодбора, СтандартнаяОбработка)
	УказатьВладельцаПолюПодразделения(Элемент)
КонецПроцедуры

Процедура ТабличноеПолеОтборЗначениеОкончаниеВводаТекста(Элемент, Текст, Значение, СтандартнаяОбработка)
	УказатьВладельцаПолюПодразделения(Элемент)
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////

мСтруктураНедоступныхОтборов = Новый Структура;

