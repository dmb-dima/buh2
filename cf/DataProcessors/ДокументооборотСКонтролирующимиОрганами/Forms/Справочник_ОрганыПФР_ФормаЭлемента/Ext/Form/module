
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "Опрос форм" И Параметр.Ключ = Ссылка Тогда
		Параметр.Форма = ЭтаФорма;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередОткрытием(Отказ, СтандартнаяОбработка)
	
	КонтекстЭДО.ОтобразитьСертификатВПолеВвода(ЭлементыФормы.Сертификат, Сертификаты);
	
КонецПроцедуры

Процедура СертификатНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	РезультатВыбора = КонтекстЭДО.ВыбратьСертификат(Сертификаты, "AddressBook", , Истина);
	Если РезультатВыбора <> Неопределено Тогда
		
		Сертификаты.Очистить();
		Если ТипЗнч(РезультатВыбора) = Тип("Структура") Тогда
			НовСтр = Сертификаты.Добавить();
			НовСтр.Сертификат = РезультатВыбора.Отпечаток;
		Иначе
			Для Каждого Стр Из РезультатВыбора Цикл
				НовСтр = Сертификаты.Добавить();
				НовСтр.Сертификат = Стр.Отпечаток;
			КонецЦикла;
		КонецЕсли;
		
		КонтекстЭДО.ОтобразитьСертификатВПолеВвода(Элемент, Сертификаты);
		Модифицированность = Истина;
		
	КонецЕсли;
	
КонецПроцедуры

Процедура СертификатОткрытие(Элемент, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Если Сертификаты.Количество() > 0 Тогда
		КонтекстЭДО.ПоказатьСертификат(Сертификаты, "AddressBook");
	КонецЕсли;
	
КонецПроцедуры

Процедура СертификатОчистка(Элемент, СтандартнаяОбработка)
	
	Сертификаты.Очистить();
	КонтекстЭДО.ОтобразитьСертификатВПолеВвода(Элемент, Сертификаты);
	Модифицированность = Истина;
	
КонецПроцедуры

