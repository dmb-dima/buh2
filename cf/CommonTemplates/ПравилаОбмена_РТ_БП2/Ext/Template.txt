<ПравилаОбмена>
	<ВерсияФормата>2.01</ВерсияФормата>
	<Ид>4edfa012-fd79-44d5-84ff-6adcb3758255    </Ид>
	<Наименование>Розница --&gt; БухгалтерияПредприятия2 (постоянный обмен)</Наименование>
	<ДатаВремяСоздания>2010-11-12T12:29:41</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.0.14" СинонимКонфигурации="Розница, редакция 1.0">Розница</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.0.18" СинонимКонфигурации="Бухгалтерия предприятия, редакция 2.0">БухгалтерияПредприятия</Приемник>
	<ПослеЗагрузкиПравилОбмена>
//рекомендуемые настройки поиска
ВариантыНастроекПоиска = Новый Структура;
ВариантыНастроекПоиска.Вставить("Контрагенты","ИННКППНаименование");
ВариантыНастроекПоиска.Вставить("Организации","ИННКППНаименование");
ВариантыНастроекПоиска.Вставить("Номенклатура","НаименованиеРодительЭтоГруппа");
ВариантыНастроекПоиска.Вставить("ФизическиеЛица","НаименованиеДатаРождения");

//после чтения правил данные параметры будут доступны для анализа
Параметры.Вставить("ВариантыНастроекПоиска",ВариантыНастроекПоиска);

Параметры.Вставить("ПервыйОбмен",Ложь);</ПослеЗагрузкиПравилОбмена>
	<ПередПолучениемИзмененныхОбъектов>ОрганизацииВыгрузки = ОбъектУзлаОбмена.Организации.Выгрузить(,"Организация");
Параметры.Вставить("ОрганизацииВыгрузки", ОрганизацииВыгрузки);</ПередПолучениемИзмененныхОбъектов>
	<ПередВыгрузкойДанных>Параметры.Контрагенты = Новый Массив();

Параметры.Вставить("ИспользоватьФильтрПоОрганизациям",?(УзелДляОбмена.Организации.Количество()&gt;0,Истина,Ложь));

Если Параметры.ИспользоватьФильтрПоОрганизациям Тогда
	
	Параметры.Вставить("МассивОрганизаций",УзелДляОбмена.Организации.Выгрузить().ВыгрузитьКолонку("Организация"));
	
КонецЕсли;
	
Если НЕ Параметры.ПервыйОбмен Тогда
	
	Параметры.Вставить("ДатаНачалаВыгрузкиДокументов",УзелДляОбмена.ДатаНачалаВыгрузкиДокументов);
	//описание типов ДокументСсылка и ДокументОбъект
	МассивТиповДокументов = Новый Массив;
	
	Для каждого МетаДокумент Из Метаданные.Документы цикл
		
		МассивТиповДокументов.Добавить(Тип("ДокументСсылка." + МетаДокумент.Имя));	
		МассивТиповДокументов.Добавить(Тип("ДокументОбъект." + МетаДокумент.Имя));	
		
	КонецЦикла;	
	
	ОписаниеТиповДокументы = Новый ОписаниеТипов(МассивТиповДокументов);
	Параметры.Вставить("ОписаниеТиповДокументы",ОписаниеТиповДокументы);
	
КонецЕсли;</ПередВыгрузкойДанных>
	<ПередЗагрузкойДанных>Параметры.ВалютаРегламентированногоУчета = Константы.ВалютаРегламентированногоУчета.Получить();
Параметры.ОсновнаяОрганизация = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнаяОрганизация");</ПередЗагрузкойДанных>
	<ПередКонвертациейОбъекта>Если НЕ Параметры.ПервыйОбмен 
	И Параметры.ОписаниеТиповДокументы.СодержитТип(ТипЗнч(Источник)) Тогда
	
	Отказ = Ложь;
	
	ПараметрИсточник = Источник;
	
	Выполнить(Алгоритмы.ВозможностьВыгрузкиОбъектаПоФильтрам);
	
КонецЕсли;</ПередКонвертациейОбъекта>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Документы.Содержит(МетаданныеОбъекта) 
	ИЛИ Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
		
		Отказ  = Истина;
		ТипОбъекта = ТипЗнч(Объект);
		
		Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) 
			И НЕ Объект.Предопределенный Тогда
			
			Объект.УстановитьПометкуУдаления(Истина);
			
		КонецЕсли;
		
		
		Если Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
			
			Если Объект.Проведен Тогда
				
				ОтменитьПроведениеОбъектаВИБ(Объект, ТипОбъекта);
				
			КонецЕсли;
			
			Объект.УстановитьПометкуУдаления(Истина);
			
		КонецЕсли;
		
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры>
		<Параметр Имя="БазоваяВерсия                                     " Наименование="БазоваяВерсия" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ВалютаРегламентированногоУчета                    " Наименование="ВалютаРегламентированногоУчета" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="Контрагенты                                       " Наименование="Контрагенты" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ОбъектыКУдалению                                  " Наименование="ОбъектыКУдалению" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ОсновнаяОрганизация                               " Наименование="ОсновнаяОрганизация" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="СкладДляОбменаДаннымиСУТ                          " Наименование="СкладДляОбменаДаннымиСУТ" ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="false" ПередаватьПараметрПриВыгрузке="false"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоГруппа
	И НЕ ЗначениеЗаполнено(Объект.ГоловнойКонтрагент) Тогда
	
	Если Объект.ЭтоНовый() Тогда
		ЗаписатьОбъектВИБ(Объект, ТипЗнч(Объект));
	КонецЕсли;	
	Объект.ГоловнойКонтрагент = Объект.Ссылка;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "Наименование" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "ИННКППНаименование" Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП, Наименование, ЭтоГруппа";	
ИначеЕсли НастройкаПоиска = "ИННКПП" Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП, ЭтоГруппа";	
Иначе
	СтрокаИменСвойствПоиска = "ИНН, КПП, Наименование, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКППНаименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП + Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН, КПП, наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКПП</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН, КПП</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументУдостоверяющийЛичность --&gt; ДокументУдостоверяющийЛичность</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДокументУдостоверяющийЛичность" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Пользователи</Код>
				<Наименование>Справочник: Пользователи</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Пользователи</Источник>
				<Приемник>СправочникСсылка.Пользователи</Приемник>
				<Свойства>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>Справочник: Склады</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ТипСклада)
 И Источник.ТипСклада &lt;&gt; Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТипЦеныПродажи --&gt; ТипЦенРозничнойТорговли</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТипЦеныПродажи" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<Приемник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование> --&gt; ВидСклада</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидСклада" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыСкладов"/>
						<ПередВыгрузкой>Значение = "Оптовый";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если НЕ Источник.ЭтоГруппа И Источник.Комплект Тогда
	Отказ = Истина;
КонецЕсли; 

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ВыгружатьКод",Ложь);
 
ЗначениеСоответстствия = мИнформацияОПользовательскихПоляхПоискаПриВыгрузкеДанных.Получить("Номенклатура");
 
Если ЗначениеСоответстствия &lt;&gt; Неопределено Тогда
	
	ИмяАлгоритмаДляПоиска = ЗначениеСоответстствия;
	
	Если ИмяАлгоритмаДляПоиска = "КодЭтоГруппа" тогда
		ИсходящиеДанные.Вставить("ВыгружатьКод",Истина);
	КонецЕсли;	
	
КонецЕсли;
	
Если НЕ Параметры.ПервыйОбмен Тогда 
	ИсходящиеДанные.Вставить("ВыгружатьКод",Истина);
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>Если НастройкаПоиска = "КодЭтоГруппа" Тогда
	СтрокаИменСвойствПоиска = "Код, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "НаименованиеЭтоГруппа" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
Иначе
	СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеЭтоГруппа</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеРодительЭтоГруппа</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Группа</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию, группе</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>КодЭтоГруппа</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Код</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по коду</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если НЕ ИсходящиеДанные.ВыгружатьКод тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>БазоваяЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
						<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>НоменклатурнаяГруппа --&gt; НоменклатурнаяГруппа</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="НоменклатурнаяГруппа" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СтранаПроисхождения --&gt; СтранаПроисхождения</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям Тогда
	Если Параметры.МассивОрганизаций.Найти(Источник.Ссылка) = Неопределено Тогда
		Отказ = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если ПустаяСтрока(Объект.НаименованиеПлательщикаПриПеречисленииВБюджет) Тогда
	Объект.НаименованиеПлательщикаПриПеречисленииВБюджет = Объект.НаименованиеПолное;
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НастройкаПоиска = "Наименование" Тогда
	СтрокаИменСвойствПоиска = "Наименование";
ИначеЕсли НастройкаПоиска = "ИННКППНаименование" Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП, Наименование";
ИначеЕсли НастройкаПоиска = "ИННКПП" Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
Иначе	
	СтрокаИменСвойствПоиска = "ИНН, КПП , Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКПП</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН, КПП</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>ИННКППНаименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>ИНН + КПП + Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по ИНН, КПП, наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ИндивидуальныйПредприниматель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИндивидуальныйПредприниматель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ИндивидуальныйПредприниматель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ОГРН --&gt; ОГРН</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Префикс --&gt; Префикс</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>Справочник: Виды контактной информации</Наименование>
				<Порядок>350</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
				<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ВидОбъектаКонтактнойИнформации --&gt; ВидОбъектаКонтактнойИнформации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
						<КодПравилаКонвертации>ВидыОбъектовКонтактнойИнформации                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Отключить="true">
						<Код>4</Код>
						<Наименование>МожноРедактироватьТолькоВДиалоге --&gt; МожноРедактироватьТолькоВДиалоге</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="МожноРедактироватьТолькоВДиалоге" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="МожноРедактироватьТолькоВДиалоге" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НомерКартинки --&gt; НомерКартинки</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НомерКартинки" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерКартинки" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Порядок --&gt; Порядок</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Порядок" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Порядок" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>7</Код>
						<Наименование>РедактированиеВДиалоге --&gt; РедактированиеВДиалоге</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="РедактированиеВДиалоге" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="РедактированиеВДиалоге" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
						<Порядок>50</Порядок>
						<Источник>EmailОрганизации</Источник>
						<Приемник>EmailОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>EmailФизЛица --&gt; EmailФизЛица</Наименование>
						<Порядок>100</Порядок>
						<Источник>EmailФизЛица</Источник>
						<Приемник>EmailФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ДругаяИнформацияКонтрагента --&gt; ДругаяИнформацияКо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ДругаяИнформацияКонтрагента</Источник>
						<Приемник>ДругаяИнформацияКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ДругаяИнформацияОрганизации --&gt; ДругаяИнформацияОр</Наименование>
						<Порядок>200</Порядок>
						<Источник>ДругаяИнформацияОрганизации</Источник>
						<Приемник>ДругаяИнформацияОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>ДругаяИнформацияФизЛица --&gt; ДругаяИнформацияФизЛиц</Наименование>
						<Порядок>250</Порядок>
						<Источник>ДругаяИнформацияФизЛица</Источник>
						<Приемник>ДругаяИнформацияФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>ТелефонКонтрагента --&gt; ТелефонКонтрагента</Наименование>
						<Порядок>300</Порядок>
						<Источник>ТелефонКонтрагента</Источник>
						<Приемник>ТелефонКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
						<Порядок>350</Порядок>
						<Источник>ТелефонОрганизации</Источник>
						<Приемник>ТелефонОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>ТелефонФизЛица --&gt; ТелефонФизЛица</Наименование>
						<Порядок>400</Порядок>
						<Источник>ТелефонФизЛица</Источник>
						<Приемник>ТелефонФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
						<Порядок>450</Порядок>
						<Источник>ФаксОрганизации</Источник>
						<Приемник>ФаксОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>10</Код>
						<Наименование>ФактАдресКонтрагента --&gt; ФактАдресКонтрагента</Наименование>
						<Порядок>500</Порядок>
						<Источник>ФактАдресКонтрагента</Источник>
						<Приемник>ФактАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>11</Код>
						<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
						<Порядок>550</Порядок>
						<Источник>ФактАдресОрганизации</Источник>
						<Приемник>ФактАдресОрганизации</Приемник>
					</Значение>
					<Значение>
						<Код>12</Код>
						<Наименование>ФактАдресФизЛица --&gt; ФактАдресФизЛица</Наименование>
						<Порядок>600</Порядок>
						<Источник>ФактАдресФизЛица</Источник>
						<Приемник>ФактАдресФизЛица</Приемник>
					</Значение>
					<Значение>
						<Код>13</Код>
						<Наименование>ЮрАдресКонтрагента --&gt; ЮрАдресКонтрагента</Наименование>
						<Порядок>650</Порядок>
						<Источник>ЮрАдресКонтрагента</Источник>
						<Приемник>ЮрАдресКонтрагента</Приемник>
					</Значение>
					<Значение>
						<Код>14</Код>
						<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
						<Порядок>700</Порядок>
						<Источник>ЮрАдресОрганизации</Источник>
						<Приемник>ЮрАдресОрганизации</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ФизическиеЛица</Код>
				<Наименование>Справочник: Физические лица</Наименование>
				<Порядок>400</Порядок>
				<ПоследовательностьПолейПоиска>Если СвойстваПоиска["ЭтоГруппа"] = Истина Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "Наименование" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
ИначеЕсли НастройкаПоиска = "НаименованиеДатаРождения" Тогда
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";	
Иначе
	СтрокаИменСвойствПоиска = "Наименование, ДатаРождения, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ФизическиеЛица</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<НастройкаВариантовПоискаОбъектов>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>Наименование</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
					<ВариантПоиска>
						<ИмяНастройкиДляАлгоритма>НаименованиеДатаРождения</ИмяНастройкиДляАлгоритма>
						<ИмяНастройкиДляПользователя>Наименование + Дата рождения</ИмяНастройкиДляПользователя>
						<ОписаниеНастройкиДляПользователя>Сопоставление по наименованию и дате рождения</ОписаниеНастройкиДляПользователя>
					</ВариантПоиска>
				</НастройкаВариантовПоискаОбъектов>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Пол --&gt; Пол</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическихЛиц"/>
						<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическихЛиц"/>
						<КодПравилаКонвертации>ПолФизическихЛиц                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>Справочник: Должности организаций</Наименование>
				<Порядок>450</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДолжностиОрганизаций</Источник>
				<Приемник>СправочникСсылка.ДолжностиОрганизаций</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>Справочник: Документы удостоверяющие личность</Наименование>
				<Порядок>500</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Источник>
				<Приемник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>КодИМНС --&gt; КодИМНС</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодИМНС" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодПФР --&gt; КодПФР</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПФР" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>Справочник: Виды оплат чека ККМ</Наименование>
				<Порядок>550</Порядок>
				<ПередВыгрузкой>Если Источник.ТипОплаты &lt;&gt; Перечисления.ТипыОплатЧекаККМ.БанковскийКредит
	И Источник.ТипОплаты &lt;&gt; Перечисления.ТипыОплатЧекаККМ.Наличные
	И Источник.ТипОплаты &lt;&gt; Перечисления.ТипыОплатЧекаККМ.ПлатежнаяКарта Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ВидыОплатЧекаККМ</Источник>
				<Приемник>СправочникСсылка.ВидыОплатОрганизаций</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПроцентБанковскойКомиссии --&gt; ПроцентБанковскойКомиссии</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ПроцентБанковскойКомиссии" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыОплатОрганизаций"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ТипОплаты --&gt; ТипОплаты</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплатЧекаККМ"/>
						<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплат"/>
						<КодПравилаКонвертации>ТипыОплатЧекаККМ                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>БанкКредитор --&gt; Контрагент</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ГруппыПользователей</Код>
				<Наименование>Справочник: Группы пользователей</Наименование>
				<Порядок>600</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ГруппыПользователей</Источник>
				<Приемник>СправочникСсылка.ГруппыПользователей</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдминистраторГруппы --&gt; АдминистраторГруппы</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="АдминистраторГруппы" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыПользователей"/>
						<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>6</Код>
						<Наименование>ПользователиГруппы --&gt; ПользователиГруппы</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ПользователиГруппы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>7</Код>
							<Наименование>Пользователь --&gt; Пользователь</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<Приемник Имя="Пользователь" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
							<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВсеПользователи --&gt; ВсеПользователи</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВсеПользователи</Источник>
						<Приемник>ВсеПользователи</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>650</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КлассификаторЕдиницИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>700</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КлассификаторСтранМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Россия --&gt; Россия</Наименование>
						<Порядок>50</Порядок>
						<Источник>Россия</Источник>
						<Приемник>Россия</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Магазины</Код>
				<Наименование>Справочник: Магазины</Наименование>
				<Порядок>750</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Магазины</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ТипЦенРозничнойТорговли --&gt; ТипЦенРозничнойТорговли</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<Приемник Имя="ТипЦенРозничнойТорговли" Вид="Реквизит" Тип="СправочникСсылка.ТипыЦенНоменклатуры"/>
						<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<НеЗамещать>true</НеЗамещать>
						<Код>5</Код>
						<Наименование> --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование> --&gt; ВидСклада</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидСклада" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыСкладов"/>
						<ПередВыгрузкой>Значение = "Розничный";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>Справочник: Типы цен номенклатуры</Наименование>
				<Порядок>800</Порядок>
				<ПослеЗагрузки>Объект.ВалютаЦены = Параметры.ВалютаРегламентированногоУчета;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.ТипыЦенНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ТипыЦенНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование> --&gt; ЦенаВключаетНДС</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование> --&gt; ОкруглятьВБольшуюСторону</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ОкруглятьВБольшуюСторону" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>Справочник: Номенклатурные группы</Наименование>
				<Порядок>850</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.НоменклатурныеГруппы</Источник>
				<Приемник>СправочникСсылка.НоменклатурныеГруппы</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Параметры.ПервыйОбмен Тогда 
	 Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>Документ: Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект);

// Заполнение дополнительных реквизитов шапки
//--нет--

// Заполнение поля "Договор". Параметры:
ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Ложь;
ПараметрИмяТабличнойЧасти       = "Товары";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;
// Заполнение поля "Договор". Функция:
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

// Заполняет счета учетов документа
Объект.ЗаполнитьСчетаУчетаРасчетов();

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина);

Если Объект.ЭтоНовый() Тогда
	Объект.СчетУчетаНДС = ПланыСчетов.Хозрасчетный.НДСпоПриобретеннымМПЗ;
КонецЕсли;

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровОтПокупателя</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>40</Код>
						<Наименование> --&gt; Сделка</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Сделка" Вид="Реквизит"/>
						<ПередВыгрузкой>ПараметрИмяТабличнойЧасти        = "Товары";
ПараметрИмяКолонкиТабличнойЧасти = "ДокументПродажи";
ПараметрОбъект                   = Источник;
ПараметрЗначение                 = Неопределено;

Выполнить(Алгоритмы.ПолучитьЗначениеПервойСтроки);

Значение = ПараметрЗначение;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование> --&gt; ПредъявленСчетФактура</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПредъявленСчетФактура" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>ПараметрИмяТабличнойЧасти        = "Товары";
ПараметрИмяКолонкиТабличнойЧасти = "ДокументПродажи";
ПараметрОбъект                   = Источник;
ПараметрЗначение                 = Неопределено;

Выполнить(Алгоритмы.ПолучитьЗначениеПервойСтроки);

Если Не ЗначениеЗаполнено(ПараметрЗначение) Тогда
	Значение = Источник.Комментарий + ?(ЗначениеЗаполнено(Источник.Комментарий), " ", "") + "Обмен с РТ: Не удалось определить значение документа отгрузки!";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаТоваров = Новый ТаблицаЗначений;
Выполнить(Алгоритмы.СформироватьТаблицуТоваровСКомплектующими);
Для Каждого СтрокаТоваров Из ТаблицаТоваров Цикл
	Если СтрокаТоваров.ПересчитыватьНДС Тогда
		ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Источник, Источник.УчитыватьНДС, Источник.СуммаВключаетНДС);
	КонецЕсли;
КонецЦикла;
КоллекцияОбъектов = ТаблицаТоваров.Скопировать();</ПередОбработкойВыгрузки>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>Документ: Возврат товаров поставщику</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект);

// Заполнение дополнительных реквизитов шапки
Объект.ПоставщикуВыставляетсяСчетФактураНаВозврат = Истина;
Объект.СтатьяДоходовИРасходов                     = Справочники.ПрочиеДоходыИРасходы.РазницыСтоимостиВозвратаИФактическойСтоимостиТоваров;

// Заполнение поля "Договор". Параметры:
ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Ложь;
ПараметрИмяТабличнойЧасти       = "Товары";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;
// Заполнение поля "Договор". Функция:
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

// Заполняет счета учетов документа
Объект.ЗаполнитьСчетаУчетаРасчетов();

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина);

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровПоставщику</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнвентаризацияТоваров</Код>
				<Наименование>Документ: Инвентаризация товаров</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
//--нет--</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ИнвентаризацияТоваров</Источник>
				<Приемник>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>КоличествоУчет --&gt; КоличествоУчет</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КоличествоУчет" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КоличествоУчет * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент * ОбъектКоллекции.Номенклатура.ЕдиницаХраненияОстатков.Коэффициент</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>СуммаУчет --&gt; СуммаУчет</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаУчет" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ТребованиеНакладная</Код>
				<Наименование>Документ: Списание товаров</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.НДСВСтоимостиТоваров = Перечисления.ДействиеНДСВСтоимостиТоваров.НеИзменять;
ЕстьПрименениеУСН = НалоговыйУчетУСН.ПрименениеУСН(Объект.Организация, Объект.Дата);

Объект.СчетЗатрат = БухгалтерскийУчет.ПолучитьСчетРасходовНаПродажу();

// Заполняет счета учета табличной части "Материалы"
Для каждого СтрокаТабличнойЧасти Из Объект.Материалы Цикл
	Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧасти(СтрокаТабличнойЧасти, "Материалы", Истина);
    Если ЕстьПрименениеУСН тогда
		СтрокаТабличнойЧасти.ОтражениеВУСН = Перечисления.ОтражениеВУСН.Принимаются;
	КонецЕсли;	
КонецЦикла;

ПараметрИмяТабличнойЧасти = "Материалы";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеТоваров</Источник>
				<Приемник>ДокументСсылка.ТребованиеНакладная</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>Товары --&gt; Материалы</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>13</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							<ПередВыгрузкой>  Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой> Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>  Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СписаниеТоваров</Код>
				<Наименование>Документ: Списание товаров</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;

Если Источник.ХозяйственнаяОперация.КодХозяйственнойОперации = Перечисления.КодыХозяйственныхОпераций.СписаниеНаЗатраты тогда
	ВыгрузитьПоПравилу(Источник,,,,"ТребованиеНакладная");
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Если НЕ ЗначениеЗаполнено(Объект.ВидОперации) Тогда
	Объект.ВидОперации = Перечисления.ВидыОперацийСписаниеТоваров.ТоварыПродукция;
КонецЕсли;

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина);

Для каждого СтрокаТЧ Из Объект.Товары Цикл
	СтрокаТЧ.ОтражениеВУСН = Перечисления.ОтражениеВУСН.НеПринимаются;
КонецЦикла;

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеТоваров</Источник>
				<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>ДокументОснование --&gt; ИнвентаризацияТоваровНаСкладе</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<Приемник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>ОснованиеСписания --&gt; Основание</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ОснованиеСписания" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>16</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>20</Код>
							<Наименование> --&gt; ДокументОприходования</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДокументОприходования" Вид="Реквизит"/>
							<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой> Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОприходованиеТоваров</Код>
				<Наименование>Документ: Оприходование товаров</Наименование>
				<Порядок>250</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
Объект.СтатьяПрочихДоходовРасходов = Справочники.ПрочиеДоходыИРасходы.РазницыСтоимостиВозвратаИФактическойСтоимостиТоваров;

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, Истина);


ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОприходованиеТоваров</Источник>
				<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ДокументОснование --&gt; ИнвентаризацияТоваровНаСкладе</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваров"/>
						<Приемник Имя="ИнвентаризацияТоваровНаСкладе" Вид="Реквизит" Тип="ДокументСсылка.ИнвентаризацияТоваровНаСкладе"/>
						<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>  Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Поступление товаров</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект);

// Заполнение дополнительных реквизитов шапки
//--нет--

// Заполнение поля "Договор". Параметры:
ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Ложь;
ПараметрИмяТабличнойЧасти       = "Товары";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;
// Заполнение поля "Договор". Функция:
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

// Заполняет счета учетов документа
Объект.ЗаполнитьСчетаУчетаРасчетов();

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина, Истина);
// Заполняет счета учета табличной части "Услуги"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Услуги, "Услуги", Истина, Истина);

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПоступлениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>14</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>27</Код>
						<Наименование>Товары --&gt; Услуги</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если НЕ ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>30</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;
Если ОбъектКоллекции.Коэффициент = 0 Тогда
	Значение = ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена;
Если ОбъектКоллекции.Коэффициент &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование> --&gt; Содержание</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.НаименованиеПолное;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>36</Код>
						<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>Документ: Реализация товаров</Наименование>
				<Порядок>350</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект);

// Заполнение дополнительных реквизитов шапки
//--нет--

// Заполнение поля "Договор". Параметры:
ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Ложь;
ПараметрИмяТабличнойЧасти       = "Товары";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;
// Заполнение поля "Договор". Функция:
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

// Заполняет счета учетов документа
Объект.ЗаполнитьСчетаУчетаРасчетов();

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина);
// Заполняет счета учета табличной части "Услуги"
Объект.ЗаполнитьСчетаУчетаВТабЧастиУслуги(Истина);

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РеализацияТоваров</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаТоваров = Новый ТаблицаЗначений;
Выполнить(Алгоритмы.СформироватьТаблицуТоваровСКомплектующими);
Для Каждого СтрокаТоваров Из ТаблицаТоваров Цикл
	Если СтрокаТоваров.ПересчитыватьНДС Тогда
		ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Источник, Источник.УчитыватьНДС, Источник.СуммаВключаетНДС);
	КонецЕсли;
КонецЦикла;
КоллекцияОбъектов = ТаблицаТоваров.Скопировать();</ПередОбработкойВыгрузки>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>17</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>23</Код>
						<Наименование>Товары --&gt; Услуги</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если НЕ ОбъектКоллекции.Номенклатура.Услуга Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>24</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;
Если ОбъектКоллекции.Коэффициент = 0 Тогда
	Значение = ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена;
Если ОбъектКоллекции.Коэффициент &lt;&gt; 0 Тогда
	Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование> --&gt; Содержание</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.НаименованиеПолное;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>47</Код>
						<Наименование> --&gt; СпособЗачетаАвансов</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособЗачетаАвансов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
						<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>Документ: Комплектация номенклатуры</Наименование>
				<Порядок>400</Порядок>
				<ПередВыгрузкой>Если Источник.Склад.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
УчетнаяПолитикаНеЗадана = Ложь;
ПараметрыНУ = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(Объект.Дата, УчетнаяПолитикаНеЗадана, Объект.Организация);
Если НЕ УчетнаяПолитикаНеЗадана Тогда
	ЕстьСкладЕНВД = (Объект.Склад.ВидСклада = Перечисления.ВидыСкладов.НеавтоматизированнаяТорговаяТочка 
	ИЛИ Объект.Склад.ВидСклада = Перечисления.ВидыСкладов.Розничный)
	И (ПараметрыНУ.ОрганизацияЯвляетсяПлательщикомЕНВД И ПараметрыНУ.РозничнаяТорговляОблагаетсяЕНВД);
Иначе
	ЕстьСкладЕНВД = Ложь;	
КонецЕсли;				 

Объект.СчетСписанияНДС = ПланыСчетов.Хозрасчетный.ИздержкиОбращения;

Если ЕстьСкладЕНВД Тогда
	Объект.СубконтоСписанияНДС1 = Справочники.СтатьиЗатрат.СписаниеНДСНаРасходыЕНВД;
Иначе
	Объект.СубконтоСписанияНДС1 = Справочники.СтатьиЗатрат.СписаниеНДСНаРасходы;
КонецЕсли;

СчетаУчета = БухгалтерскийУчет.ПолучитьСчетаУчетаНоменклатуры(Объект.Организация, Объект.Номенклатура, Объект.Склад);

Объект.СчетУчета = СчетаУчета.СчетУчета;

Для каждого СтрокаТЧ Из Объект.Комплектующие Цикл
	Объект.ЗаполнитьСчетаУчетаВСтрокеТабЧастиРегл(СтрокаТЧ, Истина);
КонецЦикла;

ПараметрИмяТабличнойЧасти = "Комплектующие";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.КомплектацияНоменклатуры</Источник>
				<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры"/>
						<КодПравилаКонвертации>ВидыОперацийКомплектацияНоменклатуры              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Склад.Организация) Тогда
	Значение = Источник.Склад.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Количество</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = Источник.Количество * Источник.Коэффициент / Источник.Номенклатура.ЕдиницаХраненияОстатков.Коэффициент</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt; НДСвСтоимостиТоваров</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
						<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Комплектующие --&gt; Комплектующие</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПриВыгрузке>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ДоляСтоимости --&gt; ДоляСтоимости</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>Документ: Отчет о розничных продажах</Наименование>
				<Порядок>450</Порядок>
				<ПередВыгрузкой>Если Источник.КассаККМ.ТипКассы = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

Объект.СуммаДокумента = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект, "Товары") + УчетНДС.ПолучитьСуммуДокументаСНДС(Объект, "АгентскиеУслуги");

// Заполнение дополнительных реквизитов шапки
//--нет--
Объект.СчетКасса = ПланыСчетов.Хозрасчетный.КассаОрганизации;

Если Объект.Оплата.Количество() &gt; 0 Тогда
	
	// Сначала проверим, виды оплат в табличной части,
	// если для вида оплат в БП установлены реквизиты, то
	// они будут использоваться для заполнения строк табличных частей,
	// иначе заполнение строк будет осуществлятся подбором договора контрагента,
	// переданного из реквизита "Эквайрер" РТ:
	МассивСтрокОплатыДляПодстановкиДоговораКонтрагента = Новый Массив;
	Для Каждого ТекСтрока Из Объект.Оплата Цикл
		
		ВидОплаты = ТекСтрока.ВидОплаты;
		
		Если ВидОплаты.ТипОплаты = Перечисления.ТипыОплат.БанковскийКредит Тогда			
			Если ЗначениеЗаполнено(ВидОплаты.Контрагент) 
				И ЗначениеЗаполнено(ВидОплаты.ДоговорКонтрагента) Тогда
				ТекСтрока.Контрагент         = ВидОплаты.Контрагент;
				ТекСтрока.ДоговорКонтрагента = ВидОплаты.ДоговорКонтрагента;
				ТекСтрока.СчетУчетаРасчетов  = ВидОплаты.СчетУчетаРасчетов;				
			Иначе
				МассивСтрокОплатыДляПодстановкиДоговораКонтрагента.Добавить(ТекСтрока);
			КонецЕсли;				
		Иначе	
			Если ЗначениеЗаполнено(ВидОплаты.Контрагент) Тогда
				ТекСтрока.Контрагент         = ВидОплаты.Контрагент;
				ТекСтрока.ДоговорКонтрагента = ВидОплаты.ДоговорКонтрагента;
				ТекСтрока.СчетУчетаРасчетов  = ВидОплаты.СчетУчетаРасчетов;
			Иначе
				МассивСтрокОплатыДляПодстановкиДоговораКонтрагента.Добавить(ТекСтрока);
			КонецЕсли;
		КонецЕсли;
		
	КонецЦикла;
	
	// Заполнение поля "Договор" строк табличной части, для которых
	// реквизиты "Выды оплаты" не установлены.
	Для Каждого ТекСтрока Из МассивСтрокОплатыДляПодстановкиДоговораКонтрагента Цикл 
	
		// Для этого переопределим "Объект", вызовем алгоритм,
		// назначим определенный в "Объекте" Договор контрагента
		// для всех строк табличной части. Параметры:
		
		ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.Прочее;
		ПараметрДата                    = Объект.Дата;
		ПараметрИмяТабличнойЧасти       = "Товары";
		ПараметрДоговорВТабличнойЧасти  = Ложь;
		ПараметрКонтрагент              = ТекСтрока.Контрагент;
		ПараметрОрганизация             = Объект.Организация;
		
		// Передадим в этот параметр "нулевое" значение, чтобы функция не "падала".
		МетаданныеДокумента = Новый Структура("Реквизиты", Новый Массив);
		
		// Кэшируем объект, чтобы в последствии "восстановить"
		кэшОбъект = Объект;
		Объект    = ТекСтрока;
		
		// Заполнение поля "Договор". Функция:
		Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
		
		// Восстанавливаем объект
		Объект = кэшОбъект;
		
	КонецЦикла;
		
КонецЕсли;

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, Истина);

// Формирует ПКО по уникальному идентификаторому, переданному из РТ
ОтчетОРозничныхПродажахУИД = Новый УникальныйИдентификатор(ПараметрыОбъекта["УникальныйИдентификаторДокумента"]);
СсылкаНаДокументПКО        = Документы.ПриходныйКассовыйОрдер.ПолучитьСсылку(ОтчетОРозничныхПродажахУИД);

СуммаНаличнойОплаты = 0;

Если ТипЗнч(ПараметрыОбъекта["ОплатаПодарочнымиСертификатами"]) = Тип("Число") Тогда
	
	СуммаНаличнойОплаты        = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект) - Объект.Оплата.Итог("СуммаОплаты") - ПараметрыОбъекта["ОплатаПодарочнымиСертификатами"];	
	
Иначе
	
	СуммаНаличнойОплаты        = УчетНДС.ПолучитьСуммуДокументаСНДС(Объект) - Объект.Оплата.Итог("СуммаОплаты");
	
КонецЕсли;	
	
	
ОбъектПКО = СсылкаНаДокументПКО.ПолучитьОбъект();

Если СуммаНаличнойОплаты &lt;= 0 Тогда
	// ПКО формируется только на сумму наличной оплаты.
	// Если сумма наличной оплаты равна нулю, в этом случае не формируется ПКО.
	// Если ПКО уже сформировано, а наличной оплаты нет, ПКО помечается на удаление.
	Если ОбъектПКО &lt;&gt; Неопределено Тогда
		ОбъектПКО.УстановитьПометкуУдаления(Истина);
	КонецЕсли;
Иначе
	// Есть наличная оплата Формируется ПКО
	Если ОбъектПКО = Неопределено Тогда
		НовыйПКО  = Истина;
		ОбъектПКО = Документы.ПриходныйКассовыйОрдер.СоздатьДокумент();
		ОбъектПКО.УстановитьСсылкуНового(СсылкаНаДокументПКО);
	Иначе
		НовыйПКО  = Ложь;
	КонецЕсли;

	ПараметрОбъект    = ОбъектПКО;
	Если Объект.ЭтоНовый() Тогда
		ЗаписатьОбъектВИБ(Объект, ТипЗнч(Объект));	
	КонецЕсли;	
	ПараметрОснование = Объект;

	//// Процедура - обработчик события "ОбработкаЗаполнения".
	//   Параметры:
	//   ПараметрОбъект    - Объект "Приходный кассовый ордер"
	//   ПараметрОснование - Ссылка на документ "Отчет о розничных продажах"
	//

	// Заполним реквизиты из стандартного набора по документу основанию.
	ЗаполнениеДокументов.ЗаполнитьШапкуДокументаПоОснованию(ПараметрОбъект, ПараметрОснование);
	СтруктураКурсаДокумента = МодульВалютногоУчета.ПолучитьКурсВалюты(Параметры.ВалютаРегламентированногоУчета, ПараметрОснование.Дата);

	Если НовыйПКО Тогда
		ПараметрОбъект.УстановитьНовыйНомер(ПараметрОбъект.Организация.Префикс);
	КонецЕсли;

	ПараметрОбъект.ДокументОснование  = ПараметрОснование.Ссылка;
	ПараметрОбъект.Дата               = ПараметрОснование.Дата;
	ПараметрОбъект.Контрагент         = ПараметрОснование.Склад;
	ПараметрОбъект.Организация        = ПараметрОснование.Организация;
	ПараметрОбъект.ПометкаУдаления    = ПараметрОснование.ПометкаУдаления;
	ПараметрОбъект.ВалютаДокумента    = Параметры.ВалютаРегламентированногоУчета;
	ПараметрОбъект.КурсДокумента      = СтруктураКурсаДокумента.Курс;
	ПараметрОбъект.КратностьДокумента = СтруктураКурсаДокумента.Кратность;
	ПараметрОбъект.ВидОперации        = Перечисления.ВидыОперацийПКО.РозничнаяВыручка;
	ПараметрОбъект.СуммаДокумента     = СуммаНаличнойОплаты;

	// Параметры документа которые могут быть изменены "вручную" и их не стоит менять при перегрузке:
	Если ПараметрОбъект.СтатьяДвиженияДенежныхСредств = Неопределено ИЛИ ПараметрОбъект.СтатьяДвиженияДенежныхСредств.Пустая() Тогда
		ПараметрОбъект.СтатьяДвиженияДенежныхСредств = ПараметрОснование.СтатьяДвиженияДенежныхСредств;
	КонецЕсли;
	Если ПараметрОбъект.Ответственный = Неопределено ИЛИ ПараметрОбъект.Ответственный.Пустая() Тогда
		ПараметрОбъект.Ответственный  = ПараметрОснование.Ответственный;
	КонецЕсли;
	Если ПараметрОбъект.СчетКасса = Неопределено ИЛИ ПараметрОбъект.СчетКасса.Пустая() Тогда
		ПараметрОбъект.СчетКасса      = ПланыСчетов.Хозрасчетный.КассаОрганизации;
	КонецЕсли;

	// Вычитаем оплату по безналичному расчету

	ПараметрОбъект.РасшифровкаПлатежа.Очистить();
	СтрокаПлатеж                         = ПараметрОбъект.РасшифровкаПлатежа.Добавить();
	СтрокаПлатеж.КурсВзаиморасчетов      = 1;
	СтрокаПлатеж.КратностьВзаиморасчетов = 1;
	СтрокаПлатеж.СуммаПлатежа            = СуммаНаличнойОплаты;
	СтрокаПлатеж.СуммаВзаиморасчетов     = СуммаНаличнойОплаты;

	// Вычисление ставки НДС для документа по учетной политике:
	УчетнаяПолитика = ОбщегоНазначения.ПолучитьПараметрыУчетнойПолитики(ПараметрОбъект.Дата, Ложь, ПараметрОбъект.Организация);
	СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
	Выполнить(Алгоритмы.ОпределитьСтавкуНДС);
	СтрокаПлатеж.СтавкаНДС = СтавкаНДС;

	ПараметрОбъект.ПересчитатьСуммуНДС(СтрокаПлатеж);

	НалоговыйУчетУСН.ЗаполнитьНастройкуКУДиР(ПараметрОбъект, , Ложь);

	////////////////////////////////////////////////////////////////////
	// Запись документа в ИБ
	//
	// определим как записывать документ
	Если ПараметрОснование.Проведен И Не СуммаНаличнойОплаты = 0 Тогда
		РежимЗаписи = РежимЗаписиДокумента.Проведение;
	Иначе
		РежимЗаписи = РежимЗаписиДокумента.ОтменаПроведения;
	КонецЕсли;
	РежимПроведения = РежимПроведенияДокумента.Неоперативный;

	ТипОбъектаПКО = ТипЗнч(ПараметрОбъект);
	Если Не СуммаНаличнойОплаты = 0 Тогда
		Попытка
			// записываем документ - проверяем наличие коллизий
			НаличиеКоллизии = ПроверитьНаличиеКоллизийИзмененийДляОбъекта(ПараметрОбъект, ТипОбъектаПКО,, ПриоритетОбъектаОбмена);
			// проведение убираем всегда...
			ОтменитьПроведениеОбъектаВИБ(ПараметрОбъект, ТипОбъектаПКО);
			Если НЕ ОбъектНайденПоКлючуВПриемнике Тогда
				ЗарегистрироватьСоответствиеОбъектовДляОбмена(ПараметрОбъект.Ссылка, СвойстваПоиска);
			КонецЕсли;
			ДобавитьСсылкуВСписокЗагруженныхОбъектов(НППГлобальнойСсылки, НппСсылки, ПараметрОбъект.Ссылка, ТипОбъектаПКО);
								
			Если РежимЗаписи = РежимЗаписиДокумента.Проведение Тогда
						
				НаборЗаписейРегистра = мМенеджерРегистраОтложенныеДвижения.СоздатьНаборЗаписей();
				НаборЗаписейРегистра.Отбор.УзелОбмена.Установить(УзелОбменаЗагрузкаДанных);
				НаборЗаписейРегистра.Отбор.Документ.Установить(ПараметрОбъект.Ссылка);
				
				СтрокаНабора = НаборЗаписейРегистра.Добавить();
				СтрокаНабора.УзелОбмена    = УзелОбменаЗагрузкаДанных;
				СтрокаНабора.Документ      = ПараметрОбъект.Ссылка;
				СтрокаНабора.ДатаДокумента = ПараметрОбъект.Дата;
				
				ЗаписатьОбъектВИБ(НаборЗаписейРегистра, "РегистрСведенийНаборЗаписей.ОтложенныеДвиженияДокументов");
				
			КонецЕсли;
			
		Исключение
			
			СтрокаОписанияОшибки = ОписаниеОшибки();
			
			// не смогли выполнить необходимые действия для документа
			ЗаписатьДокументВБезопасномРежиме(ПараметрОбъект, ТипОбъектаПКО);
				
			ЗП        = ПолучитьСтруктуруЗаписиПротокола(25, СтрокаОписанияОшибки);
			ЗП.ИмяПКО = ИмяПравила;

			Если Не ПустаяСтрока(Источник) Тогда	
				ЗП.Источник = Источник;
			КонецЕсли;
			
			ЗП.ТипОбъекта = ТипОбъектаПКО;
			ЗП.Объект     = Строка(ПараметрОбъект);
			ЗаписатьВПротоколВыполнения(25, ЗП);
			
			// объект не смогли в нормальном режиме записать - надо об этом сообщить
			ВызватьИсключение "Ошибка при записи документа: " + Строка(ПараметрОбъект) + Символы.ПС + СтрокаОписанияОшибки;
			
		КонецПопытки;
		
	Иначе //сумма наличными 0
		
		//нужно удалить ПКО
		
	КонецЕсли;
КонецЕсли;

ПараметрИмяТабличнойЧасти = "Товары";

Выполнить(Алгоритмы.ЗаполнитьНомерГТД);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОтчетОРозничныхПродажах</Источник>
				<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.Магазин) Тогда
 
 	Значение = Источник.Магазин; 
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.КассаККМ.Организация) Тогда
	Значение = Источник.КассаККМ.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>УчитыватьНДС --&gt; УчитыватьНДС</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СуммаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование>Эквайрер --&gt;</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="" Вид=""/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ИмяПараметраДляПередачи>Контрагент</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>38</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>УникальныйИдентификаторДокумента</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Строка(Источник.Ссылка.УникальныйИдентификатор());</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>ТаблицаТоваров = Новый ТаблицаЗначений;
Выполнить(Алгоритмы.СформироватьТаблицуТоваровСКомплектующими);
Для Каждого СтрокаТоваров Из ТаблицаТоваров Цикл
	Если СтрокаТоваров.ПересчитыватьНДС Тогда
		ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(СтрокаТоваров, Источник, Источник.УчитыватьНДС, Источник.СуммаВключаетНДС);
	КонецЕсли;
КонецЦикла;
КоллекцияОбъектов = ТаблицаТоваров.Скопировать();</ПередОбработкойВыгрузки>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;
Если ОбъектКоллекции.Номенклатура.Услуга И ОбъектКоллекции.Коэффициент = 0 Тогда
	Значение = ОбъектКоллекции.Количество;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга Тогда
	Значение = ОбъектКоллекции.Цена;
	Если ОбъектКоллекции.Коэффициент &lt;&gt; 0 Тогда
		Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;
	КонецЕсли;
Иначе
	Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.УчитыватьНДС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование> --&gt; СтранаПроисхождения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
							<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура.СтранаПроисхождения) тогда
Значение = ОбъектКоллекции.Номенклатура.СтранаПроисхождения;
Иначе
Отказ = Истина;	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>26</Код>
						<Наименование>ОплатаПлатежнымиКартами --&gt; Оплата</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="ОплатаПлатежнымиКартами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Оплата" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>27</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатОрганизаций"/>
							<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование> --&gt; Контрагент</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = Источник.Эквайрер;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>Сумма --&gt; СуммаОплаты</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаОплаты" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>31</Код>
						<Наименование>ОплатаБанковскимиКредитами --&gt; Оплата</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ОплатаБанковскимиКредитами" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Оплата" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>НеОчищать = Истина;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>32</Код>
							<Наименование>ВидОплаты --&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатЧекаККМ"/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплатОрганизаций"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>БанкКредитор --&gt; Контрагент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="БанкКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>Сумма --&gt; СуммаОплаты</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаОплаты" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>39</Код>
						<Наименование>ОплатаПодарочнымиСертификатами --&gt;</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ОплатаПодарочнымиСертификатами" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ОплатаПодарочнымиСертификатами</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеТоваров</Код>
				<Наименование>Документ: Перемещение товаров</Наименование>
				<Порядок>500</Порядок>
				<ПередВыгрузкой>Если Источник.СкладОтправитель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса 
	ИЛИ Источник.СкладПолучатель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	
	Отказ = Истина;
	
КонецЕсли;

Если Источник.СкладОтправитель.Организация &lt;&gt; Источник.СкладПолучатель.Организация Тогда
	
	Отказ = Истина;
	
КонецЕсли;

Если Источник.СкладОтправитель.Магазин = Источник.СкладПолучатель.Магазин Тогда
	
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
//--нет--

Объект.НДСвСтоимостиТоваров = Перечисления.ДействиеНДСВСтоимостиТоваров.НеИзменять;

// Заполняет счета учетов документа
//Объект.ЗаполнитьСчетаСписанияНДСЗначениямиПоУмолчанию();

// Заполняет счета учета табличной части "Товары"
Объект.ЗаполнитьСчетаУчетаВТабЧасти(Объект.Товары, "Товары", Истина);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПеремещениеТоваров</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование> --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.СкладОтправитель.Организация) Тогда
	Значение = Источник.СкладОтправитель.Организация;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование> --&gt; СкладОтправитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.МагазинОтправитель) Тогда
 
 	Значение = Источник.МагазинОтправитель; 
	
Иначе
	
	Значение = Источник.СкладОтправитель;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>30</Код>
						<Наименование> --&gt; СкладПолучатель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.МагазинПолучатель) Тогда
 
 	Значение = Источник.МагазинПолучатель; 
	
Иначе
	
	Значение = Источник.СкладПолучатель;
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если ОбъектКоллекции.Номенклатура.Услуга 
	ИЛИ ОбъектКоллекции.Номенклатура.ПодарочныйСертификат Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Цена / ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмерения.ЕдиницаПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; КоличествоМест</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоМест" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование> --&gt; Коэффициент</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>// Нужно для вывода в ТОРГ-12 из бухгалтерии.
Значение = ОбъектКоллекции.Коэффициент;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>Документ: Приходный кассовый ордер</Наименование>
				<Порядок>550</Порядок>
				<ПередВыгрузкой>Если Источник.Касса.ТипКассы = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
УправлениеДенежнымиСредствами.ЗаполнитьСчетУчетаДенежныхСредств(Объект, "СчетКасса");

// Заполнение поля "Договор". Параметры:
Если Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;	
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратОтПоставщика Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;		
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ПрочийПриход Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.Прочее;		
КонецЕсли;

ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Истина;
ПараметрИмяТабличнойЧасти       = "РасшифровкаПлатежа";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;

// Заполнение поля "Договор" для каждой строки ТЧ:
Для Каждого СтрокаРасшифровкиПлатежа Из Объект.РасшифровкаПлатежа Цикл
	
	кэшОбъект = Объект;
	Объект    = СтрокаРасшифровкиПлатежа;
	Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
	Объект = кэшОбъект; 
	
	//Расчитает сумму взаиморасчетов
	Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) Тогда
		
		Если НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.РасчетыВУсловныхЕдиницах
			И СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВалютаВзаиморасчетов = Объект.ВалютаДокумента Тогда
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа;
		Иначе
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа *  СтрокаРасшифровкиПлатежа.КратностьВзаиморасчетов
			/ СтрокаРасшифровкиПлатежа.КурсВзаиморасчетов;
		КонецЕсли;
		
	КонецЕсли;
			
	// Заполняет счета учетов документа (нет экспортных функций объекта)
	// Используется функция модуля формы "ОпределитьСчетаУчетаРасчетовСКонтрагентом()"
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.Контрагент, СтрокаРасшифровкиПлатежа.ДоговорКонтрагента);
	Если Объект.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратОтПоставщика тогда
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовСКонтрагентом    = СчетаУчета.СчетРасчетов;
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовПоАвансам        = СчетаУчета.СчетАвансов;
	Иначе
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовСКонтрагентом    = СчетаУчета.СчетРасчетовПокупателя;
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовПоАвансам        = СчетаУчета.СчетАвансовПокупателя;
	КонецЕсли;
	
КонецЦикла;

НалоговыйУчетУСН.ЗаполнитьНастройкуКУДиР(Объект);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПКО"/>
						<КодПравилаКонвертации>ВидыОперацийПКО                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>ПринятоОт --&gt; ПринятоОт</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПринятоОт" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; Сделка</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="Сделка" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
							<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ВозвратДенежныхСредствПоставщиком Тогда
	Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.ВозвратТоваровПоставщику") 
		И ЗначениеЗаполнено(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) Тогда
		Значение = "ПоДокументу";
	Иначе
		Значение = "Автоматически";	
	КонецЕсли;
ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя Тогда
	Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.РеализацияТоваров") 
		И ЗначениеЗаполнено(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) Тогда
		Значение = "ПоДокументу";
	Иначе
		Значение = "Автоматически";	
	КонецЕсли;	
Иначе
	Значение = "Автоматически";		
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>Документ: Расходный кассовый ордер</Наименование>
				<Порядок>600</Порядок>
				<ПередВыгрузкой>Если Источник.Касса.ТипКассы = Перечисления.ТипыКасс.КассаЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение дополнительных реквизитов шапки
УправлениеДенежнымиСредствами.ЗаполнитьСчетУчетаДенежныхСредств(Объект, "СчетКасса");

Если Объект.ВидОперации = Перечисления.ВидыОперацийРКО.Инкассация
    И НЕ ЗначениеЗаполнено(Объект.СчетУчетаРасчетовСКонтрагентом) Тогда
	Объект.СчетУчетаРасчетовСКонтрагентом = ПланыСчетов.Хозрасчетный.ПереводыВПути;
КонецЕсли;

// Заполнение поля "Договор". Параметры:
Если Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ОплатаПоставщику Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком;
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ВозвратПокупателю Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
ИначеЕсли Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ПрочийРасход Тогда
	ПараметрВидДоговора           = Перечисления.ВидыДоговоровКонтрагентов.Прочее;
КонецЕсли;

ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Истина;
ПараметрИмяТабличнойЧасти       = "РасшифровкаПлатежа";
ПараметрКонтрагент              = Объект.Контрагент;
ПараметрОрганизация             = Объект.Организация;

// Заполнение поля "Договор" для каждой строки ТЧ:
Для Каждого СтрокаРасшифровкиПлатежа Из Объект.РасшифровкаПлатежа Цикл
	
	кэшОбъект = Объект;
	Объект    = СтрокаРасшифровкиПлатежа;
	Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
	Объект = кэшОбъект; 
	
	//Расчитает сумму взаиморасчетов
	Если ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.ДоговорКонтрагента) Тогда
		
		Если НЕ СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.РасчетыВУсловныхЕдиницах
			И СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВалютаВзаиморасчетов = Объект.ВалютаДокумента Тогда
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа;
		Иначе
			СтрокаРасшифровкиПлатежа.СуммаВзаиморасчетов = СтрокаРасшифровкиПлатежа.СуммаПлатежа *  СтрокаРасшифровкиПлатежа.КратностьВзаиморасчетов
			/ СтрокаРасшифровкиПлатежа.КурсВзаиморасчетов;
		КонецЕсли;
		
	КонецЕсли;
			
	// Заполняет счета учетов документа (нет экспортных функций объекта)
	// Используется функция модуля формы "ОпределитьСчетаУчетаРасчетовСКонтрагентом()"
	СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(Объект.Организация, Объект.Контрагент, СтрокаРасшифровкиПлатежа.ДоговорКонтрагента);
	Если Объект.ВидОперации = Перечисления.ВидыОперацийРКО.ВозвратПокупателю тогда
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовСКонтрагентом    = СчетаУчета.СчетРасчетовПокупателя;
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовПоАвансам        = СчетаУчета.СчетАвансовПокупателя;
	Иначе
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовСКонтрагентом    = СчетаУчета.СчетРасчетов;
		СтрокаРасшифровкиПлатежа.СчетУчетаРасчетовПоАвансам        = СчетаУчета.СчетАвансов;
	КонецЕсли;
	
КонецЦикла;

НалоговыйУчетУСН.ЗаполнитьНастройкуКУДиР(Объект);</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РасходныйКассовыйОрдер</Источник>
				<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРКО"/>
						<КодПравилаКонвертации>ВидыОперацийРКО                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>НомерЧекаККМ --&gt; НомерЧекаККМ</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерЧекаККМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>Выдать --&gt; Выдать</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Выдать" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Основание --&gt; Основание</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Основание" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Приложение --&gt; Приложение</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Приложение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ПоДокументу --&gt; ПоДокументу</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПоДокументу" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>15</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>РасшифровкаПлатежа --&gt; РасшифровкаПлатежа</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаПлатежа</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; Сделка</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="Сделка" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование> --&gt; СпособПогашенияЗадолженности</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособПогашенияЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыПогашенияЗадолженности"/>
							<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийРКО.ОплатаПоставщику Тогда
	Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.ПоступлениеТоваров") 
		И ЗначениеЗаполнено(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) Тогда
		Значение = "ПоДокументу";
	Иначе
		Значение = "Автоматически";	
	КонецЕсли;
ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийРКО.ВозвратДенежныхСредствПокупателю Тогда
	Если ТипЗнч(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) = Тип("ДокументСсылка.ВозвратТоваровОтПокупателя") 
		И ЗначениеЗаполнено(ОбъектКоллекции.ДокументРасчетовСКонтрагентом) Тогда
		Значение = "ПоДокументу";
	Иначе
		Значение = "Автоматически";	
	КонецЕсли;
Иначе
	Значение = "Автоматически";	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>Документ: Оплата от покупателя платежной картой</Наименование>
				<Порядок>650</Порядок>
				<ПослеЗагрузки>// Определение переменных, используемых в алгоритмах
МетаданныеДокумента = Объект.Метаданные();

// Общая процедура заполнения шапки
Выполнить(Алгоритмы.ЗаполнитьШапкуДокумента);

// Заполнение поля "Договор". Параметры:
ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.Прочее;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Ложь;
ПараметрИмяТабличнойЧасти       = "";
ПараметрКонтрагент              = Объект.КонтрагентКредитор;
ПараметрОрганизация             = Объект.Организация;
// Заполнение поля "Договор". Функция:
Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);

ПараметрВидДоговора             = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
ПараметрДата                    = Объект.Дата;
ПараметрДоговорВТабличнойЧасти  = Истина;
ПараметрИмяТабличнойЧасти       = "СуммыДолга";
ПараметрКонтрагент              = Объект.КонтрагентДебитор;
ПараметрОрганизация             = Объект.Организация;

Для Каждого СтрокаРасшифровкиПлатежа Из Объект.СуммыДолга Цикл
	кэшОбъект = Объект;
	Объект    = СтрокаРасшифровкиПлатежа;
	Выполнить(Алгоритмы.УстановитьДоговорПоКонтрагенту);
	Объект = кэшОбъект;
	Если НЕ ЗначениеЗаполнено(СтрокаРасшифровкиПлатежа.СчетУчетаРасчетов) Тогда
		СчетаУчета = БухгалтерскийУчетРасчетовСКонтрагентами.ПолучитьСчетаРасчетовСКонтрагентом(ПараметрОрганизация, ПараметрКонтрагент, СтрокаРасшифровкиПлатежа.ДоговорКонтрагента);
		Если СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком Тогда
			СтрокаРасшифровкиПлатежа.СчетУчетаРасчетов = СчетаУчета.СчетРасчетов;
		ИначеЕсли СтрокаРасшифровкиПлатежа.ДоговорКонтрагента.ВидДоговора = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем Тогда
			СтрокаРасшифровкиПлатежа.СчетУчетаРасчетов = СчетаУчета.СчетРасчетовПокупателя;
		КонецЕсли;
	КонецЕсли;
КонецЦикла;

Если НЕ ЗначениеЗаполнено(Объект.СчетДт) Тогда
	Объект.СчетДт = ПланыСчетов.Хозрасчетный.ПродажиПоПлатежнымКартам;
КонецЕсли;
Если НЕ ЗначениеЗаполнено(Объект.СчетКт) Тогда
	Объект.СчетКт = ПланыСчетов.Хозрасчетный.ПродажиПоПлатежнымКартам;
КонецЕсли;

Объект.ВалютаДокумента = Параметры.ВалютаРегламентированногоУчета;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ДокументСсылка.КорректировкаДолга</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; КонтрагентДебитор</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="КонтрагентДебитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Эквайрер --&gt; КонтрагентКредитор</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Эквайрер" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="КонтрагентКредитор" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ВидОперации --&gt; ВидОперации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийКорректировкаДолга"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>РасшифровкаПлатежа --&gt; СуммыДолга</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="РасшифровкаПлатежа" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="СуммыДолга" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>ДокументРасчетовСКонтрагентом --&gt; Сделка</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДокументРасчетовСКонтрагентом" Вид="Реквизит"/>
							<Приемник Имя="Сделка" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>СуммаПлатежа --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование> --&gt; КурсВзаиморасчетов</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>СуммаПлатежа --&gt; СуммаВзаиморасчетов</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаПлатежа" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование> --&gt; ВидЗадолженности</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидЗадолженности" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыЗадолженности"/>
							<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОперацийОплатаОтПокупателяПлатежнойКартой.ОплатаПокупателя Тогда
	Значение = "Дебиторская";
ИначеЕсли Источник.ВидОперации = Перечисления.ВидыОперацийОплатаОтПокупателяПлатежнойКартой.ВозвратДенежныхСредствПокупателю Тогда
	Значение = "Кредиторская";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийКомплектацияНоменклатуры</Код>
				<Наименование>Перечисление: Виды операций документа "Комплектация нменклатуры"</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийКомплектацияНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Комплектация --&gt; Комплектация</Наименование>
						<Порядок>50</Порядок>
						<Источник>Комплектация</Источник>
						<Приемник>Комплектация</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Разукомплектация --&gt; Разукомплектация</Наименование>
						<Порядок>100</Порядок>
						<Источник>Разукомплектация</Источник>
						<Приемник>Разукомплектация</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОбъектовКонтактнойИнформации</Код>
				<Наименование>Перечисление: Виды объектов контактной информации</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Контрагенты --&gt; Контрагенты</Наименование>
						<Порядок>50</Порядок>
						<Источник>Контрагенты</Источник>
						<Приемник>Контрагенты</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Организации --&gt; Организации</Наименование>
						<Порядок>100</Порядок>
						<Источник>Организации</Источник>
						<Приемник>Организации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФизическиеЛица --&gt; ФизическиеЛица</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФизическиеЛица</Источник>
						<Приемник>ФизическиеЛица</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийПКО</Код>
				<Наименование>Перечисление: Виды операций документа "ПКО"</Наименование>
				<Порядок>300</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийПКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийПКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПоставщиком --&gt; ВозвратДенеж</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПоставщиком</Источник>
						<Приемник>ВозвратОтПоставщика</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПокупателя --&gt; ОплатаПокупателя</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПриходДенежныхСредствПрочее --&gt; ПриходДенежныхСред</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПриходДенежныхСредствПрочее</Источник>
						<Приемник>ПрочийПриход</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ОплатаПокупателя</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ОплатаПокупателя</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийРКО</Код>
				<Наименование>Перечисление: Виды операций документа "РКО"</Наименование>
				<Порядок>350</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийРКО</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийРКО</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; ВозвратДенежн</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ВозвратПокупателю</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПоставщику --&gt; ОплатаПоставщику</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПоставщику</Источник>
						<Приемник>ОплатаПоставщику</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>РасходДенежныхСредствПрочее --&gt; РасходДенежныхСред</Наименование>
						<Порядок>150</Порядок>
						<Источник>РасходДенежныхСредствПрочее</Источник>
						<Приемник>Инкассация</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ПрочиеРасчетыСКонтрагентами --&gt; ОплатаПоставщику</Наименование>
						<Порядок>200</Порядок>
						<Источник>ПрочиеРасчетыСКонтрагентами</Источник>
						<Приемник>ОплатаПоставщику</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ОтветственныеЛицаОрганизаций</Код>
				<Наименование>Перечисление: Ответственные лица организаций</Наименование>
				<Порядок>500</Порядок>
				<Источник>ПеречислениеСсылка.ОтветственныеЛицаОрганизаций</Источник>
				<Приемник>ПеречислениеСсылка.ОтветственныеЛицаОрганизаций</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ГлавныйБухгалтер --&gt; ГлавныйБухгалтер</Наименование>
						<Порядок>50</Порядок>
						<Источник>ГлавныйБухгалтер</Источник>
						<Приемник>ГлавныйБухгалтер</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Кассир --&gt; Кассир</Наименование>
						<Порядок>100</Порядок>
						<Источник>Кассир</Источник>
						<Приемник>Кассир</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Руководитель --&gt; Руководитель</Наименование>
						<Порядок>150</Порядок>
						<Источник>Руководитель</Источник>
						<Приемник>Руководитель</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПолФизическихЛиц</Код>
				<Наименование>Перечисление: Пол физических лиц</Наименование>
				<Порядок>600</Порядок>
				<Источник>ПеречислениеСсылка.ПолФизическихЛиц</Источник>
				<Приемник>ПеречислениеСсылка.ПолФизическихЛиц</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Женский --&gt; Женский</Наименование>
						<Порядок>50</Порядок>
						<Источник>Женский</Источник>
						<Приемник>Женский</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Мужской --&gt; Мужской</Наименование>
						<Порядок>100</Порядок>
						<Источник>Мужской</Источник>
						<Приемник>Мужской</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыДомов</Код>
				<Наименование>Перечисление: Типы домов</Наименование>
				<Порядок>1000</Порядок>
				<Источник>ПеречислениеСсылка.ТипыДомов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыДомов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Владение --&gt; Владение</Наименование>
						<Порядок>50</Порядок>
						<Источник>Владение</Источник>
						<Приемник>Владение</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Дом --&gt; Дом</Наименование>
						<Порядок>100</Порядок>
						<Источник>Дом</Источник>
						<Приемник>Дом</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКвартир</Код>
				<Наименование>Перечисление: Типы квартир</Наименование>
				<Порядок>1050</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКвартир</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКвартир</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Квартира --&gt; Квартира</Наименование>
						<Порядок>50</Порядок>
						<Источник>Квартира</Источник>
						<Приемник>Квартира</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Офис --&gt; Офис</Наименование>
						<Порядок>100</Порядок>
						<Источник>Офис</Источник>
						<Приемник>Офис</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>1100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКорпусов</Код>
				<Наименование>Перечисление: Типы корпусов</Наименование>
				<Порядок>1150</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКорпусов</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКорпусов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Корпус --&gt; Корпус</Наименование>
						<Порядок>50</Порядок>
						<Источник>Корпус</Источник>
						<Приемник>Корпус</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Строение --&gt; Строение</Наименование>
						<Порядок>100</Порядок>
						<Источник>Строение</Источник>
						<Приемник>Строение</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юр. / физ. лицо</Наименование>
				<Порядок>1450</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыОплатЧекаККМ</Код>
				<Наименование>Перечисление: Типы оплат чека ККМ</Наименование>
				<Порядок>1500</Порядок>
				<Источник>ПеречислениеСсылка.ТипыОплатЧекаККМ</Источник>
				<Приемник>ПеречислениеСсылка.ТипыОплат</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БанковскийКредит --&gt; БанковскийКредит</Наименование>
						<Порядок>50</Порядок>
						<Источник>БанковскийКредит</Источник>
						<Приемник>БанковскийКредит</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Наличные --&gt; Наличные</Наименование>
						<Порядок>100</Порядок>
						<Источник>Наличные</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ПлатежнаяКарта --&gt; ПлатежнаяКарта</Наименование>
						<Порядок>150</Порядок>
						<Источник>ПлатежнаяКарта</Источник>
						<Приемник>ПлатежнаяКарта</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>Перечисление: Виды операций документа "Оплата от покупателя платежной картой"</Наименование>
				<Порядок>1550</Порядок>
				<Источник>ПеречислениеСсылка.ВидыОперацийОплатаОтПокупателяПлатежнойКартой</Источник>
				<Приемник>ПеречислениеСсылка.ВидыОперацийКорректировкаДолга</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ВозвратДенежныхСредствПокупателю --&gt; СписаниеЗадол</Наименование>
						<Порядок>50</Порядок>
						<Источник>ВозвратДенежныхСредствПокупателю</Источник>
						<Приемник>ПереносЗадолженности</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ОплатаПокупателя --&gt; ПереносЗадолженности</Наименование>
						<Порядок>100</Порядок>
						<Источник>ОплатаПокупателя</Источник>
						<Приемник>ПереносЗадолженности</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Регистры сведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>200</Порядок>
			<Правило>
				<Код>КонтактнаяИнформация</Код>
				<Наименование>Регистр сведений: Контактная информация</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Если НЕ ЗначениеЗаполнено(Источник.Объект) И Источник.Объект = Неопределено тогда
	Отказ = Истина;
КонецЕсли;

Если Параметры.ИспользоватьФильтрПоОрганизациям
	И ЗначениеЗаполнено(Источник.Объект)
	И ТипЗнч(Источник.Объект) = Тип("СправочникСсылка.Организации") Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.Объект) = Неопределено Тогда
			
			Отказ = Истина;
			
	КонецЕсли;
    	
КонецЕсли;</ПередВыгрузкой>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Источник>РегистрСведенийЗапись.КонтактнаяИнформация</Источник>
				<Приемник>РегистрСведенийЗапись.КонтактнаяИнформация</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Вид --&gt; Вид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Вид" Вид="Измерение"/>
						<Приемник Имя="Вид" Вид="Измерение"/>
						<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						<ПередВыгрузкой>
Если ТипЗнч(Источник.Вид) &lt;&gt; Тип("СправочникСсылка.ВидыКонтактнойИнформации") Тогда
	
	ИмяПКО = "";

КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ЗначениеПоУмолчанию --&gt; ЗначениеПоУмолчанию</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
						<Приемник Имя="ЗначениеПоУмолчанию" Вид="Ресурс" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Объект --&gt; Объект</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Объект" Вид="Измерение"/>
						<Приемник Имя="Объект" Вид="Измерение"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Поле1 --&gt; Поле1</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Поле10 --&gt; Поле10</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Поле2 --&gt; Поле2</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Поле3 --&gt; Поле3</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Поле4 --&gt; Поле4</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Поле5 --&gt; Поле5</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Поле6 --&gt; Поле6</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Поле7 --&gt; Поле7</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Поле8 --&gt; Поле8</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Поле9 --&gt; Поле9</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Представление --&gt; Представление</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Тип --&gt; Тип</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<Приемник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ТипДома --&gt; ТипДома</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<Приемник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
						<КодПравилаКонвертации>ТипыДомов                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>ТипКвартиры --&gt; ТипКвартиры</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<Приемник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
						<КодПравилаКонвертации>ТипыКвартир                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>ТипКорпуса --&gt; ТипКорпуса</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<Приемник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
						<КодПравилаКонвертации>ТипыКорпусов                                      </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РегистрОтветственныеЛицаОрганизаций</Код>
				<Наименование>Регистр сведений: Ответственные лица организаций</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям
	И ТипЗнч(Источник.СтруктурнаяЕдиница) = Тип("СправочникСсылка.Организации") Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.СтруктурнаяЕдиница) = Неопределено Тогда
			
			Отказ = Истина;
			
	КонецЕсли;
    	
КонецЕсли;</ПередВыгрузкой>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Источник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</Источник>
				<Приемник>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Должность --&gt; Должность</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<Приемник Имя="Должность" Вид="Ресурс" Тип="СправочникСсылка.ДолжностиОрганизаций"/>
						<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ОтветственноеЛицо --&gt; ОтветственноеЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизаций"/>
						<Приемник Имя="ОтветственноеЛицо" Вид="Измерение" Тип="ПеречислениеСсылка.ОтветственныеЛицаОрганизаций"/>
						<КодПравилаКонвертации>ОтветственныеЛицаОрганизаций                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>СтруктурнаяЕдиница --&gt; СтруктурнаяЕдиница</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="СтруктурнаяЕдиница" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизическоеЛицо --&gt; ФизическоеЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизическоеЛицо" Вид="Ресурс" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>Регистр сведений: Паспортные данные физического лица</Наименование>
				<Порядок>150</Порядок>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Источник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДокументВид --&gt; ДокументВид</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<Приемник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДокументДатаВыдачи --&gt; ДокументДатаВыдачи</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
						<Приемник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДокументКемВыдан --&gt; ДокументКемВыдан</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДокументКодПодразделения --&gt; ДокументКодПодразделения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДокументНомер --&gt; ДокументНомер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДокументСерия --&gt; ДокументСерия</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФИОФизЛиц</Код>
				<Наименование>Регистр сведений: Фамилия, имя, отчество физического лица</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если Параметры.ИспользоватьФильтрПоОрганизациям
	И ТипЗнч(Источник.ФизЛицо) = Тип("СправочникСсылка.Организации") Тогда
	
	Если Параметры.МассивОрганизаций.Найти(Источник.ФизЛицо) = Неопределено Тогда
			
			Отказ = Истина;
			
	КонецЕсли;
    	
КонецЕсли;</ПередВыгрузкой>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Источник>РегистрСведенийЗапись.ФИОФизЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ФИОФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Активность --&gt; Активность</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Активность" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Имя --&gt; Имя</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Имя" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Отчество --&gt; Отчество</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Отчество" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Период --&gt; Период</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Период" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Фамилия --&gt; Фамилия</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
						<Приемник Имя="Фамилия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ФизЛицо" Вид="Измерение"/>
						<Приемник Имя="ФизЛицо" Вид="Измерение"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Организации</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>Справочник: Виды контактной информации</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыКонтактнойИнформации</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ВидыКонтактнойИнформации</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ФизическиеЛица</Код>
				<Наименование>Справочник: Физические лица</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ФизическиеЛица</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ФизическиеЛица</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ДолжностиОрганизаций</Код>
				<Наименование>Справочник: Должности организаций</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ДолжностиОрганизаций                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДолжностиОрганизаций</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ДолжностиОрганизаций</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ДокументыУдостоверяющиеЛичность</Код>
				<Наименование>Справочник: Документы удостоверяющие личность</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДокументыУдостоверяющиеЛичность</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ДокументыУдостоверяющиеЛичность</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыОплатЧекаККМ</Код>
				<Наименование>Справочник: Виды оплат чека ККМ</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ВидыОплатЧекаККМ                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыОплатЧекаККМ</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ВидыОплатОрганизаций</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ГруппыПользователей</Код>
				<Наименование>Справочник: Группы пользователей</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>ГруппыПользователей                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ГруппыПользователей</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ГруппыПользователей</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Классификатор единиц измерения</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторЕдиницИзмерения</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.КлассификаторЕдиницИзмерения</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Классификатор стран мира</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.КлассификаторСтранМира</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.КлассификаторСтранМира</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>Магазины</Код>
				<Наименование>Справочник: Магазины</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Магазины                                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Магазины</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Склады</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ТипыЦенНоменклатуры</Код>
				<Наименование>Справочник: Типы цен номенклатуры</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>ТипыЦенНоменклатуры                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ТипыЦенНоменклатуры</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.ТипыЦенНоменклатуры</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>Справочник: Номенклатурные группы</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.НоменклатурныеГруппы</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.НоменклатурныеГруппы</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Контрагенты</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Справочник: Пользователи</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Пользователи</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>Склады</Код>
				<Наименование>Справочник: Склады</Наименование>
				<Порядок>750</Порядок>
				<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Склады</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
				<ИмяТипаПриемника>СправочникСсылка.Номенклатура</ИмяТипаПриемника>
				<ПередВыгрузкойОбъекта>Если НЕ Объект.ЭтоГруппа И Объект.Комплект Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваров</Код>
				<Наименование>Документ: Поступление товаров</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ПоступлениеТоваровУслуг</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>РеализацияТоваров</Код>
				<Наименование>Документ: Реализация товаров</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>РеализацияТоваровУслуг                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РеализацияТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.РеализацияТоваровУслуг</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>Документ: Возврат товаров от покупателя</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровОтПокупателя                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтПокупателя</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ВозвратТоваровОтПокупателя</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратТоваровПоставщику</Код>
				<Наименование>Документ: Возврат товаров поставщику</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ВозвратТоваровПоставщику                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ВозвратТоваровПоставщику</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ИнвентаризацияТоваров</Код>
				<Наименование>Документ: Инвентаризация товаров</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ИнвентаризацияТоваров                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ИнвентаризацияТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ИнвентаризацияТоваровНаСкладе</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>Документ: Комплектация номенклатуры</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>КомплектацияНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.КомплектацияНоменклатуры</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.КомплектацияНоменклатуры</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>Документ: Приходный кассовый ордер</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>ПриходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриходныйКассовыйОрдер</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ПриходныйКассовыйОрдер</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>Документ: Расходный кассовый ордер</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>РасходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасходныйКассовыйОрдер</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.РасходныйКассовыйОрдер</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>СписаниеТоваров</Код>
				<Наименование>Документ: Списание товаров</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>СписаниеТоваров                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СписаниеТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.СписаниеТоваров</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ОприходованиеТоваров</Код>
				<Наименование>Документ: Оприходование товаров</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>ОприходованиеТоваров                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОприходованиеТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ОприходованиеТоваров</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтчетОРозничныхПродажах</Код>
				<Наименование>Документ: Отчет о розничных продажах</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>ОтчетОРозничныхПродажах                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ОтчетОРозничныхПродажах</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
			<Правило Отключить="false">
				<Код>ПеремещениеТоваров</Код>
				<Наименование>Документ: Перемещение товаров</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>ПеремещениеТоваров                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.ПеремещениеТоваров</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
				<ПередВыгрузкойОбъекта>Если Объект.СкладОтправитель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса
 И   Объект.СкладПолучатель.ТипСклада = Перечисления.ТипыСкладов.СкладЦентральногоОфиса Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ОплатаОтПокупателяПлатежнойКартой</Код>
				<Наименование>Документ: Оплата от покупателя платежной картой</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>ОплатаОтПокупателяПлатежнойКартой                 </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОплатаОтПокупателяПлатежнойКартой</ОбъектВыборки>
				<ИмяТипаПриемника>ДокументСсылка.КорректировкаДолга</ИмяТипаПриемника>
				<ПередОбработкойПравила>Если Параметры.ПервыйОбмен Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойПравила>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>РегистрыСведений</Код>
			<Наименование>РегистрыСведений</Наименование>
			<Порядок>150</Порядок>
			<Правило Отключить="false">
				<Код>КонтактнаяИнформация</Код>
				<Наименование>Регистр сведений: Контактная информация</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>КонтактнаяИнформация                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.КонтактнаяИнформация</ОбъектВыборки>
				<ИмяТипаПриемника>РегистрСведенийЗапись.КонтактнаяИнформация</ИмяТипаПриемника>
				<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.Отбор.Объект.Значение) = Тип("СправочникСсылка.Организации") Тогда
	ОрганизацииВыгрузки = Неопределено;
	Если ЗначениеЗаполнено(Объект.Отбор.Объект.Значение) И Параметры.Свойство("ОрганизацииВыгрузки", ОрганизацииВыгрузки) И Параметры.ОрганизацииВыгрузки.Количество() &gt; 0 Тогда
		Если Параметры.ОрганизацииВыгрузки.Найти(Объект.Отбор.Объект.Значение, "Организация") = Неопределено Тогда
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтветственныеЛицаОрганизаций</Код>
				<Наименование>Регистр сведений: Ответственные лица организаций</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>РегистрОтветственныеЛицаОрганизаций               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</ОбъектВыборки>
				<ИмяТипаПриемника>РегистрСведенийЗапись.ОтветственныеЛицаОрганизаций</ИмяТипаПриемника>
				<ПередВыгрузкойОбъекта>Если ТипЗнч(Объект.Отбор.СтруктурнаяЕдиница.Значение) = Тип("СправочникСсылка.Организации") Тогда
	ОрганизацииВыгрузки = Неопределено;
	Если ЗначениеЗаполнено(Объект.Отбор.СтруктурнаяЕдиница.Значение) И Параметры.Свойство("ОрганизацииВыгрузки", ОрганизацииВыгрузки) И Параметры.ОрганизацииВыгрузки.Количество() &gt; 0 Тогда
		Если Параметры.ОрганизацииВыгрузки.Найти(Объект.Отбор.СтруктурнаяЕдиница.Значение, "Организация") = Неопределено Тогда
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>Регистр сведений: Паспортные данные физического лица</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ПаспортныеДанныеФизЛиц                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</ОбъектВыборки>
				<ИмяТипаПриемника>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</ИмяТипаПриемника>
			</Правило>
			<Правило Отключить="false">
				<Код>ФИОФизЛиц</Код>
				<Наименование>Регистр сведений: Фамилия, имя, отчество физического лица</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ФИОФизЛиц                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>РегистрСведенийЗапись.ФИОФизЛиц</ОбъектВыборки>
				<ИмяТипаПриемника>РегистрСведенийЗапись.ФИОФизЛиц</ИмяТипаПриемника>
				<ПередВыгрузкойОбъекта> Если ТипЗнч(Объект.Отбор.ФизЛицо.Значение) = Тип("СправочникСсылка.Организации") Тогда
	ОрганизацииВыгрузки = Неопределено;
	Если ЗначениеЗаполнено(Объект.Отбор.ФизЛицо.Значение) И Параметры.Свойство("ОрганизацииВыгрузки", ОрганизацииВыгрузки) И Параметры.ОрганизацииВыгрузки.Количество() &gt; 0 Тогда
		Если Параметры.ОрганизацииВыгрузки.Найти(Объект.Отбор.ФизЛицо.Значение, "Организация") = Неопределено Тогда
			Отказ = Истина;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ВозможностьВыгрузкиОбъектаПоФильтрам" ИспользуетсяПриЗагрузке="false">
			<Текст>МетаданныеОбъекта = ПараметрИсточник.Метаданные();

//фильтр по дате выгрузки

Если ПараметрИсточник.Дата &lt; Параметры.ДатаНачалаВыгрузкиДокументов Тогда
	
	Отказ = Истина;
	
КонецЕсли;  

//фильтр по организациям
Если (НЕ Отказ)
	И Параметры.ИспользоватьФильтрПоОрганизациям Тогда
	
	Если МетаданныеОбъекта = Метаданные.Документы.ПоступлениеТоваров
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.ВозвратТоваровОтПокупателя 
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.ВозвратТоваровПоставщику
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.ИнвентаризацияТоваров
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.СписаниеТоваров
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.ОприходованиеТоваров
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.РеализацияТоваров
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.КомплектацияНоменклатуры Тогда
		
		Организация = ПараметрИсточник.Склад.Организация;
		
	ИначеЕсли МетаданныеОбъекта = Метаданные.Документы.ОтчетОРозничныхПродажах Тогда	
		
		Организация = ПараметрИсточник.КассаККМ.Организация;
		
	ИначеЕсли МетаданныеОбъекта = Метаданные.Документы.ПриходныйКассовыйОрдер
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.РасходныйКассовыйОрдер 
		ИЛИ МетаданныеОбъекта = Метаданные.Документы.ОплатаОтПокупателяПлатежнойКартой Тогда
		
		Организация = ПараметрИсточник.Организация;
		
	ИначеЕсли МетаданныеОбъекта = Метаданные.Документы.ПеремещениеТоваров Тогда	
		
		Организация = ПараметрИсточник.СкладОтправитель.Организация;
		
	Иначе
		
		Организация = Справочники.Организации.ПустаяСсылка();
		
	КонецЕсли;	
	

	Если Параметры.МассивОрганизаций.Найти(Организация) = Неопределено Тогда
		
		Отказ = Истина;
				
	КонецЕсли;
	
	Если МетаданныеОбъекта = Метаданные.Документы.ПеремещениеТоваров 
		И Параметры.МассивОрганизаций.Найти(ПараметрИсточник.СкладПолучатель.Организация) = Неопределено Тогда	
		
		Отказ = Истина;

	КонецЕсли;	
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаполнитьНомерГТД" ИспользуетсяПриЗагрузке="true">
			<Текст>//ПараметрИмяТабличнойЧасти : имя табличной части объекта

Для каждого СтрокаТЧ Из Объект[ПараметрИмяТабличнойЧасти] цикл
	Если ЗначениеЗаполнено(СтрокаТЧ.Номенклатура.НомерГТД) тогда
		СтрокаТЧ.НомерГТД = СтрокаТЧ.Номенклатура.НомерГТД;
	КонецЕсли;
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаполнитьШапкуДокумента" ИспользуетсяПриЗагрузке="true">
			<Текст>	Если ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеДокумента) 
		И (НЕ ЗначениеЗаполнено(Объект.Организация)) Тогда
		Объект.Организация = Параметры.ОсновнаяОрганизация;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("СтруктурнаяЕдиница", МетаданныеДокумента)
		И НЕ ЗначениеЗаполнено(Объект.СтруктурнаяЕдиница) 
		И ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеДокумента) Тогда
		Объект.СтруктурнаяЕдиница = Объект.Организация.ОсновнойБанковскийСчет;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ВидОперации", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.ВидОперации)) Тогда
		Объект.ВидОперации = Перечисления[Объект.ВидОперации.Метаданные().Имя][0];
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("БанковскийСчет", МетаданныеДокумента)
		И НЕ ЗначениеЗаполнено(Объект.БанковскийСчет) Тогда
		Объект.БанковскийСчет = Объект.Организация.ОсновнойБанковскийСчет;
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("ВалютаДокумента", МетаданныеДокумента) Тогда
			Объект.ВалютаДокумента = Параметры.ВалютаРегламентированногоУчета;
		КонецЕсли;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("СчетОрганизации", МетаданныеДокумента)
		И НЕ ЗначениеЗаполнено(Объект.СчетОрганизации) Тогда
		Объект.СчетОрганизации = Объект.Организация.ОсновнойБанковскийСчет;
		Объект.ВалютаДокумента = Параметры.ВалютаРегламентированногоУчета;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ВалютаДокумента", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента)) Тогда
		Объект.ВалютаДокумента = Параметры.ВалютаРегламентированногоУчета;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("КурсДокумента", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.КурсДокумента)) Тогда
		Объект.КурсДокумента = 1;
		
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("КратностьДокумента", МетаданныеДокумента) Тогда
			Объект.КратностьДокумента = 1;
		КонецЕсли;
		
	КонецЕсли;
	
	// Если тип цен оказался не заполненным,
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ТипЦен", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.ТипЦен)) Тогда
		
		// то тип цен в документ заполняется из склада.
		Если ОбщегоНазначения.ЕстьРеквизитДокумента("Склад", МетаданныеДокумента) Тогда
			Объект.ТипЦен = Объект.Склад.ТипЦенРозничнойТорговли;
		КонецЕсли;
		
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ЗанимаемыхСтавок", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.ЗанимаемыхСтавок)) Тогда
		Объект.ЗанимаемыхСтавок = 1;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("ДатаС", МетаданныеДокумента)
		И (НЕ ЗначениеЗаполнено(Объект.ДатаС)) Тогда
		Объект.ДатаС = Объект.Дата;
	КонецЕсли;
	
	Если ОбщегоНазначения.ЕстьРеквизитДокумента("НДСВключенВСтоимость", МетаданныеДокумента) И
		ОбщегоНазначения.ЕстьРеквизитДокумента("Организация", МетаданныеДокумента) Тогда
		Если НалоговыйУчетУСН.ПрименениеУСН(Объект.Организация, Объект.Дата) Тогда
			Объект.НДСВключенВСтоимость = Истина;
		КонецЕсли;
	КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ОпределитьСтавкуНДС" ИспользуетсяПриЗагрузке="true">
			<Текст>Если ЗначениеЗаполнено(УчетнаяПолитика) И УчетнаяПолитика.Количество() &gt; 0 Тогда
	Если УчетнаяПолитика.СистемаНалогообложения = Перечисления.СистемыНалогообложения.Упрощенная Тогда
		СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
	Иначе
		Если УчетнаяПолитика.СложныйУчетНДС Тогда
			СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;
		КонецЕсли;
		СтавкаНДС = Перечисления.СтавкиНДС.НДС18;
	КонецЕсли;
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПолучитьЗначениеПервойСтроки" ИспользуетсяПриЗагрузке="false">
			<Текст>// Параметры:
//   ПараметрИмяТабличнойЧасти = "Товары"
//   ПараметрИмяКолонкиТабличнойЧасти = "ДокументПродажи"
//   ПараметрОбъект = Источник
//   ПараметрЗначение = Неопределено - возвращаемое значение

Таблица = ПараметрОбъект[ПараметрИмяТабличнойЧасти].Выгрузить();
Таблица.Свернуть(ПараметрИмяКолонкиТабличнойЧасти);

Если Таблица.Количество() = 1 Тогда

	ПерваяСтрокаТаблицы = Таблица[0];
	ПараметрЗначение    = ПерваяСтрокаТаблицы[ПараметрИмяКолонкиТабличнойЧасти];
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="СформироватьТаблицуТоваровСКомплектующими" ИспользуетсяПриЗагрузке="false">
			<Текст>// Должна вызываться перед обработкой табличной части "Товары" тех документов,
// где используются наборы
МетаданныеОбъекта = Источник.Метаданные();
ЕстьСуммаНДС = ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("СуммаНДС", МетаданныеОбъекта, "Товары");
ЕстьКоличество = ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("Количество", МетаданныеОбъекта, "Товары");
Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ
|	*
|ПОМЕСТИТЬ ТаблицаПоТоварам
|ИЗ
|	&amp;ТаблицаПоТоварам КАК ТаблицаПоТоварам
|;
|
|////////////////////////////////////////////////////////////////////////////////
|// Добавляет признак комплекта в таблицу товаров
|ВЫБРАТЬ
|	ТаблицаПоТоварам.Номенклатура.Комплект КАК Комплект,
|	*,";
Если ЕстьСуммаНДС Тогда
	Запрос.Текст = Запрос.Текст + "СуммаНДС КАК НДС,";
Иначе
	Запрос.Текст = Запрос.Текст + "0 КАК НДС,";
КонецЕсли;
Если ЕстьКоличество Тогда
	Запрос.Текст = Запрос.Текст + "Количество КАК КоличествоТЧ";
Иначе
	Запрос.Текст = Запрос.Текст + "0 КАК КоличествоТЧ";
КонецЕсли;
Запрос.Текст = Запрос.Текст + "
|ИЗ
|	ТаблицаПоТоварам КАК ТаблицаПоТоварам
|;
|
|////////////////////////////////////////////////////////////////////////////////
|// Таблица товаров без комплектов
|ВЫБРАТЬ
|	*
|ИЗ
|	ТаблицаПоТоварам КАК ТаблицаПоТоварам
|	ГДЕ ТаблицаПоТоварам.Номенклатура.Комплект = Ложь";
Запрос.УстановитьПараметр("ТаблицаПоТоварам", Источник.Товары.Выгрузить());

РезультатЗапроса              = Запрос.ВыполнитьПакет();
ТаблицаТоваров                = РезультатЗапроса[1].Выгрузить();
ТаблицаПоТоварамБезКомплектов = РезультатЗапроса[2].Выгрузить();
Источник.ПодготовитьТаблицуТоваров(ТаблицаТоваров, Новый Структура());
СтруктураШапкиДокумента = Новый Структура;
СтруктураШапкиДокумента.Вставить("Дата",Источник.Дата);
Если ОбщегоНазначения.ЕстьРеквизитДокумента("Склад",МетаданныеОбъекта) тогда
	СтруктураШапкиДокумента.Вставить("Склад",Источник.Склад);
КонецЕсли;

ТаблицаПоКомплектам = УправлениеЗапасами.СформироватьТаблицуКомплектующих(ТаблицаТоваров, Источник,СтруктураШапкиДокумента);

// Объединяет таблицу товаров и таблицу комплектующих
ТаблицаТоваров = Источник.Товары.ВыгрузитьКолонки();
ТаблицаТоваров.Колонки.Добавить("ПересчитыватьНДС", Новый ОписаниеТипов("Булево"));
ОбщегоНазначения.ЗагрузитьВТаблицуЗначений(ТаблицаПоТоварамБезКомплектов, ТаблицаТоваров);
ОбщегоНазначения.ЗагрузитьВТаблицуЗначений(ТаблицаПоКомплектам,           ТаблицаТоваров);</Текст>
		</Алгоритм>
		<Алгоритм Имя="УстановитьДоговорПоКонтрагенту" ИспользуетсяПриЗагрузке="true">
			<Текст>		Если ЗначениеЗаполнено(ПараметрКонтрагент)
		   И (Не ЗначениеЗаполнено(Объект.ДоговорКонтрагента)
		   ИЛИ ПараметрКонтрагент &lt;&gt; Объект.ДоговорКонтрагента.Владелец
		   ИЛИ ПараметрОрганизация &lt;&gt; Объект.ДоговорКонтрагента.Организация) Тогда

			СписокВидовДоговора = Новый СписокЗначений;
			СписокВидовДоговора.Добавить(ПараметрВидДоговора);

			СтруктураПараметров = Новый Структура("ВалютаВзаиморасчетов, РасчетыВУсловныхЕдиницах");
			СтруктураПараметров.ВалютаВзаиморасчетов     = Новый Структура("ЗначениеОтбора, ВидСравненияОтбора", Параметры.ВалютаРегламентированногоУчета, ВидСравнения.Равно);
			СтруктураПараметров.РасчетыВУсловныхЕдиницах = Новый Структура("ЗначениеОтбора, ВидСравненияОтбора", Ложь, ВидСравнения.Равно);

			ДоговорКонтрагента  = Объект.ДоговорКонтрагента;
			ВладелецДоговора    = ПараметрКонтрагент;
			ОрганизацияДоговора = ПараметрОрганизация;
			СписокВидовДоговора = СписокВидовДоговора;
			СтруктураПараметров = СтруктураПараметров;

			НовыйДоговор = Справочники.ДоговорыКонтрагентов.ПустаяСсылка();

			Запрос = Новый Запрос;
			ТекстЗапроса = 
			"ВЫБРАТЬ РАЗРЕШЕННЫЕ ПЕРВЫЕ 2
			|	ДоговорыКонтрагентов.Ссылка,
			|	ВЫБОР
			|		КОГДА СправочникВладелец.Ссылка ЕСТЬ НЕ NULL 
			|			ТОГДА 1
			|		ИНАЧЕ 2
			|	КОНЕЦ КАК Приоритет
			|ИЗ
			|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
			|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Контрагенты КАК СправочникВладелец
			|		ПО ДоговорыКонтрагентов.Владелец = СправочникВладелец.Ссылка
			|			И ДоговорыКонтрагентов.Ссылка = СправочникВладелец.ОсновнойДоговорКонтрагента
			|ГДЕ
			|	&amp;ТекстФильтра
			|
			|УПОРЯДОЧИТЬ ПО
			|	Приоритет";

			Запрос.УстановитьПараметр("ВладелецДоговора", ВладелецДоговора);
			Запрос.УстановитьПараметр("ОрганизацияДоговора", ОрганизацияДоговора);
			Запрос.УстановитьПараметр("СписокВидовДоговора", СписокВидовДоговора);

			ТекстФильтра = "
			|	ДоговорыКонтрагентов.Владелец = &amp;ВладелецДоговора
			|	И ДоговорыКонтрагентов.Организация = &amp;ОрганизацияДоговора
			|	И ДоговорыКонтрагентов.ПометкаУдаления = ЛОЖЬ"
			+?(СписокВидовДоговора&lt;&gt;неопределено,"
			|	И ДоговорыКонтрагентов.ВидДоговора В (&amp;СписокВидовДоговора)","");

			Если ТипЗнч(СтруктураПараметров) = Тип("Структура") Тогда
				Для каждого Параметр Из СтруктураПараметров Цикл
					ИмяРеквизита = Параметр.Ключ;
					СтруктураОтбора = Параметр.Значение;
					ВидСравненияЗапроса = "=";
					ТекстФильтра = ТекстФильтра + "
					|	И ДоговорыКонтрагентов." + ИмяРеквизита + " " + ВидСравненияЗапроса + " (&amp;" + ИмяРеквизита + ")";
					Запрос.УстановитьПараметр(ИмяРеквизита, СтруктураОтбора.ЗначениеОтбора);
				КонецЦикла;
			КонецЕсли;

			ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "&amp;ТекстФильтра", ТекстФильтра);
			
			Запрос.Текст = ТекстЗапроса;
			Результат = Запрос.Выполнить();

			Если Результат.Пустой() Тогда

				НовыйДоговор                          = Справочники.ДоговорыКонтрагентов.СоздатьЭлемент();
				НовыйДоговор.ВалютаВзаиморасчетов     = Параметры.ВалютаРегламентированногоУчета;
				НовыйДоговор.ВидДоговора              = ПараметрВидДоговора;
				НовыйДоговор.Владелец                 = ПараметрКонтрагент;
				НовыйДоговор.Наименование             = "Договор создан из ""1С:Розница 8""";
				НовыйДоговор.Организация              = ПараметрОрганизация;
				НовыйДоговор.РасчетыВУсловныхЕдиницах = Ложь;
                НовыйДоговор.НалоговыйАгентПоОплате   = Ложь;
				НовыйДоговор.Записать();

				Объект.ДоговорКонтрагента = НовыйДоговор.Ссылка;

			Иначе
				Выборка = Результат.Выбрать();
				Выборка.Следующий();
				
				НайденОсновнойДоговор = Выборка.Приоритет = 1;
				НайденОдинДоговор     = Выборка.Количество() = 1;

				Если НайденОсновнойДоговор ИЛИ НайденОдинДоговор Тогда
					НовыйДоговор = Выборка.Ссылка;
				КонецЕсли;

				Если (ДоговорКонтрагента.Владелец&lt;&gt;ВладелецДоговора ИЛИ ДоговорКонтрагента.Организация&lt;&gt;ОрганизацияДоговора) ИЛИ (не ЗначениеЗаполнено(ДоговорКонтрагента)) Тогда	
					Объект.ДоговорКонтрагента = НовыйДоговор;
				КонецЕсли;

			КонецЕсли;

			Если Не ПараметрДоговорВТабличнойЧасти Тогда

				СтруктураКурсаДокумента = МодульВалютногоУчета.ПолучитьКурсВалюты(Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов, ПараметрДата);

				Если ОбщегоНазначения.ЕстьРеквизитДокумента("ВалютаДокумента", МетаданныеДокумента) Тогда
					Объект.ВалютаДокумента = Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов;
				КонецЕсли;

				// В некоторых документах курс и кратность документа отсутствуют.
				Если ОбщегоНазначения.ЕстьРеквизитДокумента("КурсДокумента", МетаданныеДокумента) Тогда
					Объект.КурсДокумента           = СтруктураКурсаДокумента.Курс;
				КонецЕсли;

				Если ОбщегоНазначения.ЕстьРеквизитДокумента("КратностьДокумента", МетаданныеДокумента) Тогда
					Объект.КратностьДокумента      = СтруктураКурсаДокумента.Кратность;
				КонецЕсли;

				Если ОбщегоНазначения.ЕстьРеквизитДокумента("КурсВзаиморасчетов", МетаданныеДокумента) Тогда
					Объект.КурсВзаиморасчетов      = СтруктураКурсаДокумента.Курс;
				КонецЕсли;

				Если ОбщегоНазначения.ЕстьРеквизитДокумента("КратностьВзаиморасчетов", МетаданныеДокумента) Тогда
					Объект.КратностьВзаиморасчетов = СтруктураКурсаДокумента.Кратность;
				КонецЕсли;

			Иначе

				СтруктураКурсаДокумента = МодульВалютногоУчета.ПолучитьКурсВалюты(Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов, ПараметрДата);

				Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("КурсВзаиморасчетов", МетаданныеДокумента, ПараметрИмяТабличнойЧасти) Тогда
					Объект.КурсВзаиморасчетов      = СтруктураКурсаДокумента.Курс;
				КонецЕсли;

				Если ОбщегоНазначения.ЕстьРеквизитТабЧастиДокумента("КратностьВзаиморасчетов", МетаданныеДокумента, ПараметрИмяТабличнойЧасти) Тогда
					Объект.КратностьВзаиморасчетов = СтруктураКурсаДокумента.Кратность;
				КонецЕсли;

			КонецЕсли;

		КонецЕсли;</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>