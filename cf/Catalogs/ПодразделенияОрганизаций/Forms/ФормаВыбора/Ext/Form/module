
// Процедура обновляет заголовок формы по выбранному 
//  владельцу справочника
//
// Параметры: 
//  Нет.
//
// Возвращаемое значение:
//  Нет.
//
Процедура ОбновитьЗаголовок()

	Заголовок = "Список подразделений организации " + Организация.Наименование

КонецПроцедуры // ОбновитьЗаголовок()

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ ИЗМЕНЕНИЯ ЗНАЧЕНИЙ РЕКВИЗИТОВ ШАПКИ

// обновляем заголовок формы
Процедура ОрганизацияПриИзменении(Элемент)

	ОбновитьЗаголовок()

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ, ОБЩИХ ДЛЯ ВСЕЙ ФОРМЫ
               

Процедура ПриОткрытии()
	
	// проставляем организацию пользователя по умолчанию
    Если ПараметрВыборПоВладельцу <> Неопределено Тогда
        Организация = ПараметрВыборПоВладельцу
	КонецЕсли;
    Если ПараметрОтборПоВладельцу <> Неопределено Тогда
        Организация = ПараметрОтборПоВладельцу
	КонецЕсли;
    Если Организация.Пустая() Тогда
		Организация = глЗначениеПеременной("ОсновнаяОрганизация");
	КонецЕсли;
	
	РаботаСДиалогами.ИзменитьПредставлениеКнопкиВыбораСвойств(ЭтаФорма, РаботаСДиалогами.ПолучитьОписаниеЗначенийСвойствОбъекта(ЭлементыФормы.СправочникСписок.ТекущаяСтрока));
	
    ОбновитьЗаголовок()
	
КонецПроцедуры

Процедура ПриПовторномОткрытии()

	Если ПараметрВыборПоВладельцу <> Неопределено Тогда
        Организация = ПараметрВыборПоВладельцу
	КонецЕсли;
    Если ПараметрОтборПоВладельцу <> Неопределено Тогда
        Организация = ПараметрОтборПоВладельцу
	КонецЕсли;

	ОбновитьЗаголовок()

КонецПроцедуры

Процедура ДействияФормыДействиеСвойства(Кнопка)
	
	РаботаСДиалогами.ОткрытьСвойстваИзСписка(ЭлементыФормы.СправочникСписок.ТекущаяСтрока, ЭтаФорма);
	
КонецПроцедуры

Процедура СправочникСписокПриАктивизацииСтроки(Элемент)
	
	РаботаСДиалогами.ИзменитьПредставлениеКнопкиВыбораСвойств(ЭтаФорма, РаботаСДиалогами.ПолучитьОписаниеЗначенийСвойствОбъекта(ЭлементыФормы.СправочникСписок.ТекущаяСтрока));
	
КонецПроцедуры

Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "ОбновлениеЗначенийСвойств" И Источник = ЭлементыФормы.СправочникСписок.ТекущаяСтрока Тогда
		РаботаСДиалогами.ИзменитьПредставлениеКнопкиВыбораСвойств(ЭтаФорма, Параметр);
	КонецЕсли;
	
КонецПроцедуры
