
// Процедура устанавливает видимость реквизитов формы
//
Процедура УстановитьВидимость()
	
	ЭтоОсновнаяСистема = (ВидДеятельностиДляНалоговогоУчетаЗатрат = Перечисления.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ПредпринимательскаяДеятельностьНеОблагаемаяЕНВД
					  Или ВидДеятельностиДляНалоговогоУчетаЗатрат = Перечисления.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ВидДеятельностиОпределяетсяПоДоходам);
	
	ЭлементыФормы.ВидРасходовНУ.АвтоОтметкаНезаполненного = ЭтоОсновнаяСистема;
	ЭлементыФормы.ВидРасходовНУ.АвтоВыборНезаполненного   = ЭтоОсновнаяСистема;
	ЭлементыФормы.ВидРасходовНУ.ОтметкаНезаполненного     = ЭтоОсновнаяСистема И НЕ ЗначениеЗаполнено(ВидРасходовНУ);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

// Обработчик события "ПриОткрытии" формы
//
Процедура ПриОткрытии()
										   
	Если ЭтоНовый() Тогда
		ВидДеятельностиДляНалоговогоУчетаЗатрат	= Перечисления.ВидыДеятельностиДляНалоговогоУчетаЗатрат.ПредпринимательскаяДеятельностьНеОблагаемаяЕНВД;
	КонецЕсли;		
	 
	МеханизмНумерацииОбъектов.ДобавитьВМенюДействияКнопкуРедактированияКода(ЭлементыФормы.ДействияФормы.Кнопки.Подменю);
	МеханизмНумерацииОбъектов.УстановитьДоступностьПоляВводаНомера(Метаданные(), ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю,ЭлементыФормы.Код);

	УстановитьВидимость();

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ РЕКВИЗИТОВ ФОРМЫ

// Процедура разрешения/запрещения редактирования номера документа
Процедура ДействияФормыРедактироватьКод(Кнопка)
	
	МеханизмНумерацииОбъектов.ИзменениеВозможностиРедактированияНомера(ЭтотОбъект.Метаданные(), ЭтаФорма, ЭлементыФормы.ДействияФормы.Кнопки.Подменю, ЭлементыФормы.Код);
			
КонецПроцедуры

// Обработчик события "ПриИзменении" реквизита "ВидДеятельностиДляНалоговогоУчетаЗатрат".
//
Процедура ВидДеятельностиДляНалоговогоУчетаЗатратПриИзменении(Элемент)
	
	УстановитьВидимость();
	
КонецПроцедуры