////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ РЕКВИЗИТОВ ФОРМЫ

// Процедура - обработчик события "НачалоВыбора" реквизита ДокументОснование
//
Процедура ДокументОснованиеНачалоВыбора(Элемент, СтандартнаяОбработка)
	
	Отбор = Новый Структура();
	
	Если ЗначениеЗаполнено(ДокументОбъект.Организация) Тогда
		Отбор.Вставить("Организация", ДокументОбъект.Организация);
	КонецЕсли;
	Если ЗначениеЗаполнено(ДокументОбъект.Контрагент) Тогда
		Отбор.Вставить("Контрагент", ДокументОбъект.Контрагент);
	КонецЕсли;
	
	// {ОбособленныеПодразделения
	Если ТипЗнч(ДокументОбъект) = Тип("ДокументОбъект.АвизоРасчетыВходящее")
		И ЗначениеЗаполнено(ДокументОбъект.Организация) Тогда
		Отбор.Вставить("ОрганизацияПолучатель", ДокументОбъект.Организация);
	ИначеЕсли ТипЗнч(ДокументОбъект) = Тип("ДокументОбъект.АвизоПрочееВходящее")
		И ЗначениеЗаполнено(ДокументОбъект.ОрганизацияОтправитель) Тогда
		Отбор.Вставить("Организация", ДокументОбъект.ОрганизацияОтправитель);
	КонецЕсли;
	// }ОбособленныеПодразделения 

	РаботаСДиалогами.НачалоВыбораЗначенияДокументаСоставногоТипа(ДокументОбъект, ЭтаФорма, Элемент, СтандартнаяОбработка, Отбор, "");
		
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

// Обработчик события ПриОткрытии формы
//
Процедура ПриОткрытии()
	
	Если ТипЗнч(ДокументОбъект) = Тип("Неопределено") Тогда
	
		ЭлементыФормы.НадписьКомментарий.Заголовок = "Не указан документ, для которого выбирается основание!";
		ЭлементыФормы.ДокументОснование.Доступность = Ложь;
		ЭлементыФормы.ОсновныеДействияФормы.Кнопки.ОК.Доступность = Ложь;
	
	Иначе
	
		ЭлементыФормы.НадписьКомментарий.Заголовок = 
			"Выберите основание для документа:
			|" + Строка(ДокументОбъект);
			
		ДокументОснование = ДокументОбъект.ДокументОснование;
	
	КонецЕсли;
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ ДЕЙСТВИЙ КОМАНДНЫХ ПАНЕЛЕЙ ФОРМЫ

//Обработчик события нажатия кнопки "ОК"
//
Процедура ОсновныеДействияФормыОК(Кнопка)
	
	ДокументОбъект.ДокументОснование = ДокументОснование;
	Закрыть();
	
КонецПроцедуры

