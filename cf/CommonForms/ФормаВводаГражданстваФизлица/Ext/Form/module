////////////////////////////////////////////////////////////////////////////////
// ПЕРЕМЕННЫЕ МОДУЛЯ

// в переменной запоминаем страну которая задана до установки
// переключателя - Лицо без гражданства
Перем мСтрана;

Перем мРезультатДиалога;

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура ПриОткрытии()
	
	// установим переключатель в форме в соответствии с выбранным гражданством
	ЛицоБезГражданства = Страна = Справочники.КлассификаторСтранМира.ЛицоБезГражданства;
	ЭлементыФормы.ГражданинСтраны.ТолькоПросмотр = ЛицоБезГражданства;
	Если ЛицоБезГражданства Тогда
		ЭлементыФормы.ГражданинСтраны.Значение = Справочники.КлассификаторСтранМира.ПустаяСсылка();
	Иначе
		ЭлементыФормы.ГражданинСтраны.Значение = Страна;
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриЗакрытии()
	
	Если мРезультатДиалога = "ПодтвердитьИзменения" тогда
		ОповеститьОВыборе(Страна);
	КонецЕсли;
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ

Процедура ПодтвердитьИзменения(Кнопка)
	
	мРезультатДиалога = "ПодтвердитьИзменения";
	Закрыть();
	
КонецПроцедуры

Процедура ПереключательГражданствоПриИзменении(Элемент)
	
	Если ЛицоБезГражданства Тогда
		мСтрана = ЭлементыФормы.ГражданинСтраны.Значение;
		Страна = Справочники.КлассификаторСтранМира.ЛицоБезГражданства;
		ЭлементыФормы.ГражданинСтраны.Значение = Справочники.КлассификаторСтранМира.ПустаяСсылка();
		ЭлементыФормы.ГражданинСтраны.ПропускатьПриВводе = Истина;
	Иначе
		Страна = мСтрана;
		ЭлементыФормы.ГражданинСтраны.Значение = Страна;
		ЭлементыФормы.ГражданинСтраны.ПропускатьПриВводе = Ложь;
	КонецЕсли;
	
	ЭлементыФормы.ГражданинСтраны.ТолькоПросмотр = ЛицоБезГражданства;
	
КонецПроцедуры

Процедура ГражданинСтраныПриИзменении(Элемент)
	
	Страна = Элемент.Значение;
	
КонецПроцедуры

//Инициализация переменных формы
мРезультатДиалога = "";

