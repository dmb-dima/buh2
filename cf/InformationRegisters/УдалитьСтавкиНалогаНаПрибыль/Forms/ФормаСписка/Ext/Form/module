////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура ПриОткрытии()

	// Проверка однофирменности
	РаботаСДиалогами.УстановитьОтборПоОрганизации(ЭтаФорма,, глЗначениеПеременной("ОсновнаяОрганизация"), "РегистрСведенийСписок");
	
КонецПроцедуры

Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "ИзменениеТекущейОрганизации" Тогда
		РаботаСДиалогами.УстановитьОтборПоОрганизации(ЭтаФорма,, глЗначениеПеременной("ОсновнаяОрганизация"), "РегистрСведенийСписок", Истина);
	КонецЕсли;
	
КонецПроцедуры

Процедура РегистрСведенийСписокПриНачалеРедактирования(Элемент, НоваяСтрока)
	
	Если НоваяСтрока Тогда
		
		СтрокаТЧ = ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные;
		
		Если ТипЗнч(ПараметрОтборПоИзмерению) = Тип("Структура") Тогда
			Если НЕ ЗначениеЗаполнено(ПараметрОтборПоИзмерению) Тогда
				СтрокаТЧ.Организация = глЗначениеПеременной("ОсновнаяОрганизация");
			КонецЕсли;
		КонецЕсли;
		
	КонецЕсли;

КонецПроцедуры

Процедура РегистрСведенийСписокПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
		ОформлениеСтроки.Ячейки.ИтогоСтавок.УстановитьТекст(ОбщегоНазначения.ФорматСумм(ДанныеСтроки.СтавкаФБ + ДанныеСтроки.СтавкаСубъектРФ + ДанныеСтроки.СтавкаМестный));

КонецПроцедуры

