
Процедура НадписьСтавкиРФНажатие(Элемент)
	
	ФормаРегистра = РегистрыСведений.СтавкиНалогаНаПрибыльВБюджетСубъектовРФ.ПолучитьФормуСписка();
	ФормаРегистра.Открыть();

КонецПроцедуры


Процедура ПриОткрытии()
	
	Если Константы.ПрименяютсяРазныеСтавкиНалогаНаПрибыль.Получить() Тогда
		
		ЭтаФорма.Панель.ТекущаяСтраница = ЭтаФорма.Панель.Страницы.СтраницаДляРазныхСтавок;
		ЭтаФорма.Панель.Страницы.СтраницаДляОдинаковыхСтавок.Доступность =  Ложь;
		ЭтаФорма.Панель.Страницы.СтраницаДляРазныхСтавок.Доступность =Истина;
	Иначе	
		ЭтаФорма.Панель.ТекущаяСтраница = ЭтаФорма.Панель.Страницы.СтраницаДляОдинаковыхСтавок;
		ЭтаФорма.Панель.Страницы.СтраницаДляОдинаковыхСтавок.Доступность = Истина;
		ЭтаФорма.Панель.Страницы.СтраницаДляРазныхСтавок.Доступность = Ложь;
	КонецЕсли;	
	
	
КонецПроцедуры

Процедура ТабличноеПолеРазныеСтавкиПередОкончаниемРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования, Отказ)
    
    Если ОтменаРедактирования Тогда
        Возврат
    КонецЕсли;
    
    Если Не ЗначениеЗаполнено(Элемент.ТекущиеДанные.Период) Тогда
        ОбщегоНазначения.СообщитьОбОшибке("Не указан период", Отказ);
    КонецЕсли;
    
    Если НоваяСтрока Тогда
        ТекДата = Элемент.ТекущиеДанные.Период;
        Если Не РегистрыСведений.СтавкиНалогаНаПрибыльДляВсехОрганизаций.ПолучитьПоследнее(ТекДата - 1).СтавкаФБ = Элемент.ТекущиеДанные.СтавкаФБ 
            Или Не РегистрыСведений.СтавкиНалогаНаПрибыльДляВсехОрганизаций.ПолучитьПоследнее(ТекДата - 1).СтавкаСубъектРФ = Элемент.ТекущиеДанные.СтавкаСубъектРФ Тогда
            
            НалоговыйУчет.СообщитьОбИзмененииСтавки(Элемент.ТекущиеДанные);
        КонецЕсли;
    КонецЕсли;
    
КонецПроцедуры

Процедура РегистрСведенийСписокПередОкончаниемРедактирования(Элемент, НоваяСтрока, ОтменаРедактирования, Отказ)
    
    Если ОтменаРедактирования Тогда
        Возврат
    КонецЕсли;
    
    Если Не ЗначениеЗаполнено(Элемент.ТекущиеДанные.Период) Тогда
        ОбщегоНазначения.СообщитьОбОшибке("Не указан период", Отказ);
    КонецЕсли;
    
    Если НоваяСтрока И НЕ Элемент.ТекущиеДанные = Неопределено Тогда
        ТекДата = Элемент.ТекущиеДанные.Период;
        Если Не РегистрыСведений.СтавкиНалогаНаПрибыльДляВсехОрганизаций.ПолучитьПоследнее(ТекДата - 1).СтавкаФБ = Элемент.ТекущиеДанные.СтавкаФБ 
            Или Не РегистрыСведений.СтавкиНалогаНаПрибыльДляВсехОрганизаций.ПолучитьПоследнее(ТекДата - 1).СтавкаСубъектРФ = Элемент.ТекущиеДанные.СтавкаСубъектРФ Тогда
            
            НалоговыйУчет.СообщитьОбИзмененииСтавки(Элемент.ТекущиеДанные);
        КонецЕсли;
    КонецЕсли;
КонецПроцедуры

Процедура РегистрСведенийСписокПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
    
    Если Не НоваяСтрока Тогда
        Возврат;
    КонецЕсли;
    
    Элемент.ТекущиеДанные.СтавкаФБ = 2;
    Элемент.ТекущиеДанные.СтавкаСубъектРФ = 18;
    
КонецПроцедуры

Процедура ТабличноеПолеРазныеСтавкиПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	
    Если Не НоваяСтрока Тогда
		Возврат
	КонецЕсли;
	
    Элемент.ТекущиеДанные.СтавкаФБ = 2;
    
КонецПроцедуры

Процедура РегистрСведенийСписокСтавкаФБПриИзменении(Элемент)
    НалоговыйУчет.СообщитьОбИзмененииСтавки(ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные);
КонецПроцедуры

Процедура РегистрСведенийСписокСтавкаСубъектРФПриИзменении(Элемент)
    НалоговыйУчет.СообщитьОбИзмененииСтавки(ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные);
КонецПроцедуры

Процедура ТабличноеПолеРазныеСтавкиСтавкаФБПриИзменении(Элемент)
        НалоговыйУчет.СообщитьОбИзмененииСтавки(ЭлементыФормы.ТабличноеПолеРазныеСтавки.ТекущаяСтрока);
КонецПроцедуры


