
////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

Процедура РегистрСведенийСписокПриНачалеРедактирования(Элемент, НоваяСтрока)

	Если НоваяСтрока Тогда

		СтрокаТЧ = ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные;
		СтрокаТЧ.Организация = глЗначениеПеременной("ОсновнаяОрганизация");

	КонецЕсли;

КонецПроцедуры

Процедура РегистрСведенийСписокПриВыводеСтроки(Элемент, ОформлениеСтроки, ДанныеСтроки)
	
	ТекущаяОрганизация = ДанныеСтроки.Организация;
	ОформлениеСтроки.Ячейки.ПериодПо.Значение = Формат(РаботаСДиалогами.НайтиДатуОкончанияДействия(ДанныеСтроки.Период, ТекущаяОрганизация), "ДФ=дд.ММ.гггг");
	
КонецПроцедуры

Процедура ПриОткрытии()
	
	Если Отбор.Организация.Использование Тогда
		Если ОбщегоНазначения.ЭтоОбособленноеПодразделение(Отбор.Организация.Значение) Тогда
			Отбор.Организация.Значение = ОбщегоНазначения.ГоловнаяОрганизация(Отбор.Организация.Значение);
		КонецЕсли;
	КонецЕсли;
	
	ТекущаяОрганизация = глЗначениеПеременной("ОсновнаяОрганизация");
	Если ОбщегоНазначения.ЭтоОбособленноеПодразделение(ТекущаяОрганизация) Тогда
		ТекущаяОрганизация = ОбщегоНазначения.ГоловнаяОрганизация(ТекущаяОрганизация);
	КонецЕсли;

	РаботаСДиалогами.УстановитьОтборПоОрганизации(ЭтаФорма,, ТекущаяОрганизация, "РегистрСведенийСписок");
	ЭлементыФормы.РегистрСведенийСписок.НастройкаПорядка.Организация.Доступность = Истина;
	ЭтаФорма.РегистрСведенийСписок.Порядок.Установить("Организация Возр, Период Убыв");
	
КонецПроцедуры

Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия = "ИзменениеТекущейОрганизации" Тогда
		РаботаСДиалогами.УстановитьОтборПоОрганизации(ЭтаФорма,, глЗначениеПеременной("ОсновнаяОрганизация"), "РегистрСведенийСписок", Истина);
	КонецЕсли;
	
КонецПроцедуры


Процедура РегистрСведенийСписокПослеУдаления(Элемент)
		глЗначениеПеременнойУстановить("глУчетнаяПолитика", ЗаполнениеУчетнойПолитики(), ИСТИНА);
КонецПроцедуры




