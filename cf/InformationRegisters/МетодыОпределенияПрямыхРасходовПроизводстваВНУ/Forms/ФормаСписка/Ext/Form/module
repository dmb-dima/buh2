
Процедура РегистрСведенийСписокВидРасходовНУПриИзменении(Элемент)
	
	ТекущаяСтрока = ЭтаФорма.ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные;	
	
	Если Не ЗначениеЗаполнено(Элемент.Значение) Тогда  
		
		Возврат;   
	Иначе
		Если НЕ ВидРасходаДопускаетсяВСписокПрямых(Элемент.Значение) Тогда
			ТекущаяСтрока.ВидРасходовНУ = Перечисления.ВидыРасходовНУ.ПустаяСсылка(); 
			Возврат;
		КонецЕсли;
	КонецЕсли; 
	
	
	Если Не ЗначениеЗаполнено(ТекущаяСтрока.СтатьяЗатрат) Тогда 
		
		Если НЕ ТекущаяСтрока.СтатьяЗатрат.ВидРасходовНУ = Элемент.Значение Тогда
			ТекущаяСтрока.СтатьяЗатрат = Справочники.СтатьиЗатрат.ПустаяСсылка();
		КонецЕсли;
	КонецЕсли; 

КонецПроцедуры

Функция ВидРасходаДопускаетсяВСписокПрямых(ВидРасхода) 
	
	Если (ВидРасхода = Перечисления.ВидыРасходовНУ.ДобровольноеЛичноеСтрахование) Или 
	     (ВидРасхода = Перечисления.ВидыРасходовНУ.ДобровольноеЛичноеСтрахованиеНаСлучайСмертиИлиУтратыРаботоспособности) Или  
	     (ВидРасхода = Перечисления.ВидыРасходовНУ.ДобровольноеСтрахованиеПоДоговорамДолгосрочногоСтрахованияЖизниРаботников) Или   
	     (ВидРасхода = Перечисления.ВидыРасходовНУ.АмортизационнаяПремия) Или   
		 (ВидРасхода = Перечисления.ВидыРасходовНУ.РасходыНаРекламуНормируемые) Или   
	     (ВидРасхода = Перечисления.ВидыРасходовНУ.ПредставительскиеРасходы) Тогда  
		
		Сообщить("Вид расхода " + ВидРасхода +" может быть только косвенным");
		Возврат Ложь;
	КонецЕсли;  
	
		Возврат Истина; 
		
КонецФункции // ПроверитьВидРасхода()


Процедура РегистрСведенийСписокСтатьяЗатратПриИзменении(Элемент)
	
	ТекущаяСтрока = ЭтаФорма.ЭлементыФормы.РегистрСведенийСписок.ТекущиеДанные;	
	
	Если Не ЗначениеЗаполнено(Элемент.Значение) Тогда  
		
		Возврат; 
	Иначе
		 Если НЕ ВидРасходаДопускаетсяВСписокПрямых(Элемент.Значение.ВидРасходовНУ) Тогда  
		 	
			ТекущаяСтрока.СтатьяЗатрат = Справочники.СтатьиЗатрат.ПустаяСсылка();
			Возврат;
			
		 КонецЕсли;
	КонецЕсли;
	
		
		Если Не Элемент.Значение.ВидРасходовНУ = ТекущаяСтрока.ВидРасходовНУ Тогда
			
			Сообщить("Укажите статью затрат с видом расходов (НУ): " + ТекущаяСтрока.ВидРасходовНУ);
			ТекущаяСтрока.СтатьяЗатрат = Справочники.СтатьиЗатрат.ПустаяСсылка();
			
	КонецЕсли; 
	

КонецПроцедуры

